"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./src/components/DiscussionMessages.tsx":
/*!***********************************************!*\
  !*** ./src/components/DiscussionMessages.tsx ***!
  \***********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ DiscussionMessages; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _ui_button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ui/button */ \"(app-pages-browser)/./src/components/ui/button.tsx\");\n/* harmony import */ var _ui_input__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ui/input */ \"(app-pages-browser)/./src/components/ui/input.tsx\");\n/* harmony import */ var _ui_popup__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ui/popup */ \"(app-pages-browser)/./src/components/ui/popup.tsx\");\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/contexts/AuthContext */ \"(app-pages-browser)/./src/contexts/AuthContext.tsx\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\nfunction DiscussionMessages(param) {\n    let { discussionId, discussionTitle, onBack } = param;\n    _s();\n    console.log(\"[DEBUG] DiscussionMessages component initialized with discussionId:\", discussionId);\n    const { user } = (0,_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_5__.useAuth)();\n    console.log(\"[DEBUG] User from AuthContext in DiscussionMessages:\", user);\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [subDiscussions, setSubDiscussions] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    // Helper function to format dates\n    const formatDate = (date)=>{\n        const now = new Date();\n        const diffInSeconds = Math.floor((now.getTime() - date.getTime()) / 1000);\n        if (diffInSeconds < 60) {\n            return \"just now\";\n        } else if (diffInSeconds < 3600) {\n            const minutes = Math.floor(diffInSeconds / 60);\n            return \"\".concat(minutes, \" \").concat(minutes === 1 ? \"minute\" : \"minutes\", \" ago\");\n        } else if (diffInSeconds < 86400) {\n            const hours = Math.floor(diffInSeconds / 3600);\n            return \"\".concat(hours, \" \").concat(hours === 1 ? \"hour\" : \"hours\", \" ago\");\n        } else {\n            const days = Math.floor(diffInSeconds / 86400);\n            return \"\".concat(days, \" \").concat(days === 1 ? \"day\" : \"days\", \" ago\");\n        }\n    };\n    // Track locally added messages that haven't been confirmed from the server yet\n    const [pendingMessages, setPendingMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    // Use a ref to store the polling interval ID\n    const pollingIntervalRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // Fetch messages and sub-discussions from the server\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        console.log(\"[DEBUG] DiscussionMessages useEffect running for discussionId:\", discussionId);\n        let isMounted = true; // Track if component is mounted\n        // Function to fetch data without setting up polling\n        const fetchData = async function() {\n            let showLoading = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : true;\n            console.log(\"[DEBUG] DiscussionMessages fetchData function called\");\n            if (!isMounted) return; // Don't proceed if component is unmounted\n            if (pendingMessages.length > 0 || !showLoading) {\n                // Don't show loading indicator when we have pending messages\n                // or when explicitly requested not to\n                setIsLoading(false);\n            } else {\n                setIsLoading(true);\n            }\n            try {\n                console.log(\"[DEBUG] Fetching messages and subdiscussions from API\");\n                // Fetch messages for the current discussion\n                const messagesResponse = await fetch(\"/api/messages?discussionId=\".concat(discussionId));\n                console.log(\"[DEBUG] Messages API response status:\", messagesResponse.status);\n                const subDiscussionsResponse = await fetch(\"/api/subdiscussions?discussionId=\".concat(discussionId));\n                console.log(\"[DEBUG] Subdiscussions API response status:\", subDiscussionsResponse.status);\n                if (!isMounted) return; // Don't proceed if component is unmounted\n                if (!messagesResponse.ok || !subDiscussionsResponse.ok) {\n                    console.error(\"[DEBUG] API response not OK - Messages:\", messagesResponse.status, messagesResponse.statusText);\n                    console.error(\"[DEBUG] API response not OK - Subdiscussions:\", subDiscussionsResponse.status, subDiscussionsResponse.statusText);\n                    throw new Error(\"Failed to fetch data\");\n                }\n                const messagesData = await messagesResponse.json();\n                const subDiscussionsData = await subDiscussionsResponse.json();\n                if (!isMounted) return; // Don't proceed if component is unmounted\n                console.log(\"[DEBUG] Raw messages data:\", messagesData);\n                // Separate messages into main discussion messages and sub-discussion messages\n                const mainDiscussionMessages = [];\n                const subDiscussionMessagesMap = new Map();\n                // Process all messages\n                messagesData.forEach((m)=>{\n                    const formattedMessage = {\n                        id: m.id,\n                        author: m.author,\n                        content: m.content,\n                        timestamp: formatDate(new Date(m.created_at)),\n                        serverId: m.id // Store the server ID for reference\n                    };\n                    if (m.subdiscussion_id) {\n                        var _subDiscussionMessagesMap_get;\n                        // This is a sub-discussion message\n                        const subId = m.subdiscussion_id;\n                        if (!subDiscussionMessagesMap.has(subId)) {\n                            subDiscussionMessagesMap.set(subId, []);\n                        }\n                        (_subDiscussionMessagesMap_get = subDiscussionMessagesMap.get(subId)) === null || _subDiscussionMessagesMap_get === void 0 ? void 0 : _subDiscussionMessagesMap_get.push(formattedMessage);\n                        console.log(\"[DEBUG] Added message to sub-discussion \".concat(subId, \":\"), formattedMessage);\n                    } else {\n                        // This is a main discussion message\n                        mainDiscussionMessages.push(formattedMessage);\n                    }\n                });\n                // Transform sub-discussions data and associate messages\n                const formattedSubDiscussions = subDiscussionsData.map((s)=>{\n                    const subMessages = subDiscussionMessagesMap.get(s.id) || [];\n                    console.log(\"[DEBUG] Sub-discussion \".concat(s.id, \" has \").concat(subMessages.length, \" messages\"));\n                    // Calculate the last message timestamp\n                    let lastMessageTime = s.created_at;\n                    if (subMessages.length > 0) {\n                        // Find the most recent message timestamp by looking at all messages\n                        // This is a fallback in case the messages aren't already sorted\n                        lastMessageTime = subMessages.reduce((latest, msg)=>{\n                            // Check if this message timestamp is more recent\n                            const msgTime = new Date(msg.timestamp).getTime();\n                            return msgTime > latest ? msgTime : latest;\n                        }, new Date(s.created_at).getTime());\n                    }\n                    return {\n                        id: s.id,\n                        title: s.title,\n                        createdAt: formatDate(new Date(s.created_at)),\n                        lastMessageAt: formatDate(new Date(lastMessageTime)),\n                        messages: subMessages,\n                        progress: s.progress || 0\n                    };\n                });\n                // Set main discussion messages\n                const formattedMessages = mainDiscussionMessages;\n                // If we have a selected sub-discussion, update its messages\n                if (selectedSubDiscussion) {\n                    const updatedSubDiscussion = formattedSubDiscussions.find((sd)=>sd.id === selectedSubDiscussion.id);\n                    if (updatedSubDiscussion) {\n                        console.log(\"[DEBUG] Updating selected sub-discussion \".concat(selectedSubDiscussion.id, \" with \").concat(updatedSubDiscussion.messages.length, \" messages\"));\n                        // Update the selected sub-discussion with new messages from the server\n                        setSelectedSubDiscussion(updatedSubDiscussion);\n                    }\n                }\n                // Check if any pending messages have been confirmed by the server\n                const confirmedMessageIds = formattedMessages.map((m)=>m.serverId);\n                const stillPendingMessages = pendingMessages.filter((pm)=>{\n                    // Keep messages that don't have a server ID yet or whose ID isn't in the confirmed list\n                    return !pm.serverId || !confirmedMessageIds.includes(pm.serverId);\n                });\n                // Combine server messages with any pending messages that haven't been confirmed yet\n                const combinedMessages = [\n                    ...formattedMessages,\n                    ...stillPendingMessages\n                ];\n                if (!isMounted) return; // Don't proceed if component is unmounted\n                setMessages(combinedMessages);\n                setPendingMessages(stillPendingMessages);\n                setSubDiscussions(formattedSubDiscussions);\n            } catch (error) {\n                console.error(\"[DEBUG] Error fetching data:\", error);\n                // Only use fallback data if we have no messages yet and component is still mounted\n                if (isMounted && messages.length === 0 && pendingMessages.length === 0) {\n                    setMessages([\n                        {\n                            id: 1,\n                            author: \"Abhishek Yadav\",\n                            content: \"Hi everyone, I created this discussion to talk about the upcoming project.\",\n                            timestamp: \"2 days ago\"\n                        },\n                        {\n                            id: 2,\n                            author: \"Daiwik Neema\",\n                            content: \"Thanks for setting this up! I have a few ideas I'd like to share.\",\n                            timestamp: \"1 day ago\"\n                        },\n                        {\n                            id: 3,\n                            author: \"Yang Liu\",\n                            content: \"I've been working on some designs that might be relevant here.\",\n                            timestamp: \"10 hours ago\"\n                        }\n                    ]);\n                    setSubDiscussions([\n                        {\n                            id: 1,\n                            title: \"UI Implementation Plan\",\n                            createdAt: \"1 day ago\",\n                            lastMessageAt: \"1 day ago\",\n                            messages: [],\n                            progress: 30\n                        }\n                    ]);\n                }\n            } finally{\n                if (isMounted) {\n                    setIsLoading(false);\n                }\n            }\n        };\n        // Initial data fetch\n        fetchData();\n        // Set up polling to refresh data every 10 seconds, but only for new messages\n        // not for re-rendering the entire component\n        if (pollingIntervalRef.current) {\n            clearInterval(pollingIntervalRef.current);\n        }\n        pollingIntervalRef.current = setInterval(()=>{\n            // Use the silent fetch option to avoid showing loading indicators during polling\n            fetchData(false);\n        }, 10000); // Increased to 10 seconds to reduce load\n        // Cleanup function to prevent memory leaks and state updates after unmount\n        return ()=>{\n            isMounted = false;\n            if (pollingIntervalRef.current) {\n                clearInterval(pollingIntervalRef.current);\n                pollingIntervalRef.current = null;\n            }\n            console.log(\"[DEBUG] DiscussionMessages cleanup - interval cleared for discussionId:\", discussionId);\n        };\n    }, [\n        discussionId\n    ]); // Only re-run when discussionId changes\n    const [selectedSubDiscussion, setSelectedSubDiscussion] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isNewSubDiscussionOpen, setIsNewSubDiscussionOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [newSubDiscussionTitle, setNewSubDiscussionTitle] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [newMessage, setNewMessage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const handleNewSubDiscussion = ()=>{\n        setIsNewSubDiscussionOpen(true);\n    };\n    const handleCreateSubDiscussion = async ()=>{\n        if (newSubDiscussionTitle.trim()) {\n            try {\n                console.log(\"[DEBUG] Creating sub-discussion with discussionId:\", discussionId);\n                const response = await fetch(\"/api/subdiscussions\", {\n                    method: \"POST\",\n                    headers: {\n                        \"Content-Type\": \"application/json\",\n                        \"Authorization\": \"Bearer \".concat(localStorage.getItem(\"auth_token\") || \"default-token\")\n                    },\n                    body: JSON.stringify({\n                        discussionId: discussionId,\n                        title: newSubDiscussionTitle.trim()\n                    })\n                });\n                if (!response.ok) {\n                    throw new Error(\"Failed to create sub-discussion\");\n                }\n                const newSubDiscussion = await response.json();\n                // Add the new sub-discussion to the state\n                setSubDiscussions((prev)=>[\n                        ...prev,\n                        {\n                            id: newSubDiscussion.id,\n                            title: newSubDiscussion.title,\n                            createdAt: \"just now\",\n                            lastMessageAt: \"just now\",\n                            messages: [],\n                            progress: 0\n                        }\n                    ]);\n                setNewSubDiscussionTitle(\"\");\n                setIsNewSubDiscussionOpen(false);\n            } catch (error) {\n                console.error(\"Error creating sub-discussion:\", error);\n                // Fallback to client-side creation if API fails\n                setSubDiscussions((prev)=>[\n                        ...prev,\n                        {\n                            id: Date.now(),\n                            title: newSubDiscussionTitle.trim(),\n                            createdAt: \"just now\",\n                            lastMessageAt: \"just now\",\n                            messages: [],\n                            progress: 0\n                        }\n                    ]);\n                setNewSubDiscussionTitle(\"\");\n                setIsNewSubDiscussionOpen(false);\n            }\n        }\n    };\n    const handleSendMessage = async (e)=>{\n        e.preventDefault();\n        if (newMessage.trim()) {\n            // Create a temporary ID for the pending message\n            const tempId = \"temp-\".concat(Date.now());\n            // Create a pending message to show immediately\n            const pendingMessage = {\n                id: tempId,\n                author: (user === null || user === void 0 ? void 0 : user.full_name) || \"You\",\n                content: newMessage.trim(),\n                timestamp: \"just now\",\n                isPending: true\n            };\n            console.log(\"[DEBUG] Creating pending message:\", pendingMessage);\n            console.log(\"[DEBUG] Selected sub-discussion:\", selectedSubDiscussion ? selectedSubDiscussion.id : \"none\");\n            // Add the pending message to the UI immediately\n            if (selectedSubDiscussion) {\n                // Update the selected sub-discussion with the new message\n                const updatedSubDiscussion = {\n                    ...selectedSubDiscussion,\n                    messages: [\n                        ...selectedSubDiscussion.messages,\n                        pendingMessage\n                    ],\n                    lastMessageAt: \"just now\"\n                };\n                // Update the sub-discussion in the state\n                setSubDiscussions((prev)=>prev.map((sub)=>sub.id === selectedSubDiscussion.id ? updatedSubDiscussion : sub));\n                // Also update the selectedSubDiscussion state to show the message immediately\n                setSelectedSubDiscussion(updatedSubDiscussion);\n                console.log(\"[DEBUG] Added message to sub-discussion UI:\", updatedSubDiscussion.messages.length);\n            } else {\n                // Add to both messages and pendingMessages for main discussion\n                setMessages((prev)=>[\n                        ...prev,\n                        pendingMessage\n                    ]);\n                setPendingMessages((prev)=>[\n                        ...prev,\n                        pendingMessage\n                    ]);\n                console.log(\"[DEBUG] Added message to main discussion UI\");\n            }\n            // Clear the input field immediately\n            setNewMessage(\"\");\n            try {\n                // Send the message to the server\n                const response = await fetch(\"/api/messages\", {\n                    method: \"POST\",\n                    headers: {\n                        \"Content-Type\": \"application/json\",\n                        \"Authorization\": \"Bearer \".concat(localStorage.getItem(\"auth_token\") || \"default-token\")\n                    },\n                    body: JSON.stringify({\n                        discussion_id: discussionId,\n                        subdiscussion_id: (selectedSubDiscussion === null || selectedSubDiscussion === void 0 ? void 0 : selectedSubDiscussion.id) || null,\n                        content: pendingMessage.content,\n                        username: (user === null || user === void 0 ? void 0 : user.full_name) || \"Anonymous\"\n                    })\n                });\n                if (!response.ok) {\n                    throw new Error(\"Failed to send message\");\n                }\n                const newMessageData = await response.json();\n                console.log(\"[DEBUG] Message saved to server with ID:\", newMessageData.id);\n                // Update the pending message with the server ID\n                if (selectedSubDiscussion) {\n                    // Create updated messages array with the server ID\n                    const updatedMessages = selectedSubDiscussion.messages.map((msg)=>msg.id.toString() === tempId ? {\n                            ...msg,\n                            id: newMessageData.id,\n                            serverId: newMessageData.id,\n                            isPending: false\n                        } : msg);\n                    // Create updated sub-discussion object\n                    const updatedSubDiscussion = {\n                        ...selectedSubDiscussion,\n                        messages: updatedMessages,\n                        lastMessageAt: \"just now\"\n                    };\n                    // Update the sub-discussion in the state\n                    setSubDiscussions((prev)=>prev.map((sub)=>sub.id === selectedSubDiscussion.id ? updatedSubDiscussion : sub));\n                    // Also update the selectedSubDiscussion state to show the confirmed message\n                    setSelectedSubDiscussion(updatedSubDiscussion);\n                    console.log(\"[DEBUG] Updated sub-discussion messages with server ID:\", updatedMessages.length);\n                } else {\n                    // Update main discussion messages\n                    setMessages((prev)=>prev.map((msg)=>msg.id.toString() === tempId ? {\n                                ...msg,\n                                id: newMessageData.id,\n                                serverId: newMessageData.id,\n                                isPending: false\n                            } : msg));\n                    // Update the pending message in the pendingMessages array\n                    setPendingMessages((prev)=>prev.map((msg)=>msg.id.toString() === tempId ? {\n                                ...msg,\n                                id: newMessageData.id,\n                                serverId: newMessageData.id,\n                                isPending: false\n                            } : msg));\n                    console.log(\"[DEBUG] Updated main discussion messages with server ID\");\n                }\n            } catch (error) {\n                console.error(\"Error sending message:\", error);\n                // The message is already in the UI, so we don't need to add it again\n                // Just mark it as failed so the user knows it didn't send\n                if (selectedSubDiscussion) {\n                    setSubDiscussions((prev)=>prev.map((sub)=>sub.id === selectedSubDiscussion.id ? {\n                                ...sub,\n                                messages: sub.messages.map((msg)=>msg.id.toString() === tempId ? {\n                                        ...msg,\n                                        failed: true\n                                    } : msg)\n                            } : sub));\n                } else {\n                    setMessages((prev)=>prev.map((msg)=>msg.id.toString() === tempId ? {\n                                ...msg,\n                                failed: true\n                            } : msg));\n                }\n            }\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"p-6\",\n        children: [\n            isLoading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex justify-center items-center py-8\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600\"\n                    }, void 0, false, {\n                        fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                        lineNumber: 479,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        className: \"ml-2 text-gray-600\",\n                        children: \"Loading messages...\"\n                    }, void 0, false, {\n                        fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                        lineNumber: 480,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                lineNumber: 478,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center justify-between mb-6\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center gap-4\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_button__WEBPACK_IMPORTED_MODULE_2__.Button, {\n                                onClick: selectedSubDiscussion ? ()=>setSelectedSubDiscussion(null) : onBack,\n                                variant: \"outline\",\n                                className: \"text-gray-600 hover:text-gray-900\",\n                                children: \"← Back\"\n                            }, void 0, false, {\n                                fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                                lineNumber: 485,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                                        className: \"text-xl font-semibold text-gray-900\",\n                                        children: selectedSubDiscussion ? selectedSubDiscussion.title : discussionTitle\n                                    }, void 0, false, {\n                                        fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                                        lineNumber: 493,\n                                        columnNumber: 13\n                                    }, this),\n                                    selectedSubDiscussion && selectedSubDiscussion.progress !== undefined && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        className: \"text-sm text-gray-600\",\n                                        children: [\n                                            \"Progress: \",\n                                            selectedSubDiscussion.progress,\n                                            \"%\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                                        lineNumber: 497,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                                lineNumber: 492,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                        lineNumber: 484,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex gap-2\",\n                        children: !selectedSubDiscussion && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_button__WEBPACK_IMPORTED_MODULE_2__.Button, {\n                            onClick: handleNewSubDiscussion,\n                            className: \"bg-blue-600 hover:bg-blue-700 text-white\",\n                            children: \"+ New Sub-discussion\"\n                        }, void 0, false, {\n                            fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                            lineNumber: 505,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                        lineNumber: 503,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                lineNumber: 483,\n                columnNumber: 7\n            }, this),\n            !selectedSubDiscussion && subDiscussions.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mb-6\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                        className: \"text-lg font-medium text-gray-900 mb-3\",\n                        children: \"Sub-discussions\"\n                    }, void 0, false, {\n                        fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                        lineNumber: 517,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"space-y-2\",\n                        children: subDiscussions.map((sub)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                onClick: ()=>setSelectedSubDiscussion(sub),\n                                className: \"p-3 border rounded-md hover:bg-blue-50 cursor-pointer transition-colors\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                                        className: \"font-medium text-gray-900\",\n                                        children: sub.title\n                                    }, void 0, false, {\n                                        fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                                        lineNumber: 525,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        className: \"text-sm text-gray-500\",\n                                        children: [\n                                            sub.messages.length,\n                                            \" messages • Last message \",\n                                            sub.lastMessageAt\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                                        lineNumber: 526,\n                                        columnNumber: 17\n                                    }, this)\n                                ]\n                            }, sub.id, true, {\n                                fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                                lineNumber: 520,\n                                columnNumber: 15\n                            }, this))\n                    }, void 0, false, {\n                        fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                        lineNumber: 518,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                lineNumber: 516,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"space-y-4 mb-6 max-h-[600px] overflow-y-auto\",\n                children: (selectedSubDiscussion ? selectedSubDiscussion.messages : messages).map((message)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex \".concat(message.author === (user === null || user === void 0 ? void 0 : user.full_name) ? \"justify-end\" : \"justify-start\"),\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"max-w-xs sm:max-w-md md:max-w-lg rounded-lg p-3 \".concat(message.author === (user === null || user === void 0 ? void 0 : user.full_name) ? \"bg-blue-500 text-white rounded-br-none\" : \"bg-gray-100 text-gray-900 rounded-bl-none\"),\n                            children: [\n                                message.author !== (user === null || user === void 0 ? void 0 : user.full_name) && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"text-xs font-medium text-gray-500 mb-1\",\n                                    children: message.author\n                                }, void 0, false, {\n                                    fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                                    lineNumber: 551,\n                                    columnNumber: 17\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"text-sm\",\n                                    children: message.content\n                                }, void 0, false, {\n                                    fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                                    lineNumber: 555,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"text-xs mt-1 \".concat(message.author === (user === null || user === void 0 ? void 0 : user.full_name) ? \"text-blue-100\" : \"text-gray-500\"),\n                                    children: [\n                                        message.timestamp,\n                                        message.isPending && \" • Sending...\",\n                                        message.failed && \" • Failed to send\"\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                                    lineNumber: 556,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                            lineNumber: 543,\n                            columnNumber: 13\n                        }, this)\n                    }, message.id, false, {\n                        fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                        lineNumber: 537,\n                        columnNumber: 11\n                    }, this))\n            }, void 0, false, {\n                fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                lineNumber: 535,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"form\", {\n                onSubmit: handleSendMessage,\n                className: \"p-4 border-t\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex space-x-2\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                            type: \"text\",\n                            value: newMessage,\n                            onChange: (e)=>setNewMessage(e.target.value),\n                            placeholder: \"Type your message...\",\n                            className: \"flex-1 rounded-full border border-gray-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500\"\n                        }, void 0, false, {\n                            fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                            lineNumber: 570,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            type: \"submit\",\n                            className: \"bg-indigo-600 text-white px-4 py-2 rounded-full hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2\",\n                            children: \"Send\"\n                        }, void 0, false, {\n                            fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                            lineNumber: 577,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                    lineNumber: 569,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                lineNumber: 568,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_popup__WEBPACK_IMPORTED_MODULE_4__.Dialog, {\n                open: isNewSubDiscussionOpen,\n                onOpenChange: setIsNewSubDiscussionOpen,\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_popup__WEBPACK_IMPORTED_MODULE_4__.DialogHeader, {\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_popup__WEBPACK_IMPORTED_MODULE_4__.DialogTitle, {\n                            children: \"Create New Sub-discussion\"\n                        }, void 0, false, {\n                            fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                            lineNumber: 588,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                        lineNumber: 587,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_popup__WEBPACK_IMPORTED_MODULE_4__.DialogContent, {\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"space-y-4 py-4\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                        className: \"block text-sm font-medium text-gray-700 mb-1\",\n                                        children: \"Sub-discussion Title\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                                        lineNumber: 593,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_input__WEBPACK_IMPORTED_MODULE_3__.Input, {\n                                        value: newSubDiscussionTitle,\n                                        onChange: (e)=>setNewSubDiscussionTitle(e.target.value),\n                                        placeholder: \"Enter sub-discussion title...\",\n                                        className: \"w-full\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                                        lineNumber: 596,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                                lineNumber: 592,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                            lineNumber: 591,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                        lineNumber: 590,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_popup__WEBPACK_IMPORTED_MODULE_4__.DialogFooter, {\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_button__WEBPACK_IMPORTED_MODULE_2__.Button, {\n                                variant: \"secondary\",\n                                onClick: ()=>setIsNewSubDiscussionOpen(false),\n                                children: \"Cancel\"\n                            }, void 0, false, {\n                                fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                                lineNumber: 606,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_button__WEBPACK_IMPORTED_MODULE_2__.Button, {\n                                onClick: handleCreateSubDiscussion,\n                                className: \"bg-blue-600 hover:bg-blue-700 text-white\",\n                                disabled: !newSubDiscussionTitle.trim(),\n                                children: \"Create Sub-discussion\"\n                            }, void 0, false, {\n                                fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                                lineNumber: 612,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                        lineNumber: 605,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n                lineNumber: 586,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/components/DiscussionMessages.tsx\",\n        lineNumber: 476,\n        columnNumber: 5\n    }, this);\n}\n_s(DiscussionMessages, \"lZeoeJy54AhqKIuN/2qN7yqxWXM=\", false, function() {\n    return [\n        _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_5__.useAuth\n    ];\n});\n_c = DiscussionMessages;\nvar _c;\n$RefreshReg$(_c, \"DiscussionMessages\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb21wb25lbnRzL0Rpc2N1c3Npb25NZXNzYWdlcy50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUVvRDtBQUNmO0FBQ0Y7QUFDeUQ7QUFDM0M7QUEyQmxDLFNBQVNXLG1CQUFtQixLQUFrRTtRQUFsRSxFQUFFQyxZQUFZLEVBQUVDLGVBQWUsRUFBRUMsTUFBTSxFQUEyQixHQUFsRTs7SUFDekNDLFFBQVFDLEdBQUcsQ0FBQyx1RUFBdUVKO0lBQ25GLE1BQU0sRUFBRUssSUFBSSxFQUFFLEdBQUdQLDhEQUFPQTtJQUN4QkssUUFBUUMsR0FBRyxDQUFDLHdEQUF3REM7SUFFcEUsTUFBTSxDQUFDQyxVQUFVQyxZQUFZLEdBQUduQiwrQ0FBUUEsQ0FBWSxFQUFFO0lBQ3RELE1BQU0sQ0FBQ29CLGdCQUFnQkMsa0JBQWtCLEdBQUdyQiwrQ0FBUUEsQ0FBa0IsRUFBRTtJQUN4RSxNQUFNLENBQUNzQixXQUFXQyxhQUFhLEdBQUd2QiwrQ0FBUUEsQ0FBQztJQUUzQyxrQ0FBa0M7SUFDbEMsTUFBTXdCLGFBQWEsQ0FBQ0M7UUFDbEIsTUFBTUMsTUFBTSxJQUFJQztRQUNoQixNQUFNQyxnQkFBZ0JDLEtBQUtDLEtBQUssQ0FBQyxDQUFDSixJQUFJSyxPQUFPLEtBQUtOLEtBQUtNLE9BQU8sRUFBQyxJQUFLO1FBRXBFLElBQUlILGdCQUFnQixJQUFJO1lBQ3RCLE9BQU87UUFDVCxPQUFPLElBQUlBLGdCQUFnQixNQUFNO1lBQy9CLE1BQU1JLFVBQVVILEtBQUtDLEtBQUssQ0FBQ0YsZ0JBQWdCO1lBQzNDLE9BQU8sR0FBY0ksT0FBWEEsU0FBUSxLQUF3QyxPQUFyQ0EsWUFBWSxJQUFJLFdBQVcsV0FBVTtRQUM1RCxPQUFPLElBQUlKLGdCQUFnQixPQUFPO1lBQ2hDLE1BQU1LLFFBQVFKLEtBQUtDLEtBQUssQ0FBQ0YsZ0JBQWdCO1lBQ3pDLE9BQU8sR0FBWUssT0FBVEEsT0FBTSxLQUFrQyxPQUEvQkEsVUFBVSxJQUFJ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ZW50cy9EaXNjdXNzaW9uTWVzc2FnZXMudHN4P2FlNjciXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICcuL3VpL2J1dHRvbic7XG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gJy4vdWkvaW5wdXQnO1xuaW1wb3J0IHsgRGlhbG9nLCBEaWFsb2dIZWFkZXIsIERpYWxvZ1RpdGxlLCBEaWFsb2dDb250ZW50LCBEaWFsb2dGb290ZXIgfSBmcm9tICcuL3VpL3BvcHVwJztcbmltcG9ydCB7IHVzZUF1dGggfSBmcm9tICdAL2NvbnRleHRzL0F1dGhDb250ZXh0JztcblxuaW50ZXJmYWNlIERpc2N1c3Npb25NZXNzYWdlc1Byb3BzIHtcbiAgZGlzY3Vzc2lvbklkOiBudW1iZXI7XG4gIGRpc2N1c3Npb25UaXRsZTogc3RyaW5nO1xuICBvbkJhY2s6ICgpID0+IHZvaWQ7XG59XG5cbmludGVyZmFjZSBNZXNzYWdlIHtcbiAgaWQ6IG51bWJlciB8IHN0cmluZztcbiAgYXV0aG9yOiBzdHJpbmc7XG4gIGNvbnRlbnQ6IHN0cmluZztcbiAgdGltZXN0YW1wOiBzdHJpbmc7XG4gIHNlcnZlcklkPzogbnVtYmVyO1xuICBpc1BlbmRpbmc/OiBib29sZWFuO1xuICBmYWlsZWQ/OiBib29sZWFuO1xufVxuXG5pbnRlcmZhY2UgU3ViRGlzY3Vzc2lvbiB7XG4gIGlkOiBudW1iZXI7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIGNyZWF0ZWRBdDogc3RyaW5nO1xuICBsYXN0TWVzc2FnZUF0OiBzdHJpbmc7XG4gIG1lc3NhZ2VzOiBNZXNzYWdlW107XG4gIHByb2dyZXNzPzogbnVtYmVyO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBEaXNjdXNzaW9uTWVzc2FnZXMoeyBkaXNjdXNzaW9uSWQsIGRpc2N1c3Npb25UaXRsZSwgb25CYWNrIH06IERpc2N1c3Npb25NZXNzYWdlc1Byb3BzKSB7XG4gIGNvbnNvbGUubG9nKCdbREVCVUddIERpc2N1c3Npb25NZXNzYWdlcyBjb21wb25lbnQgaW5pdGlhbGl6ZWQgd2l0aCBkaXNjdXNzaW9uSWQ6JywgZGlzY3Vzc2lvbklkKTtcbiAgY29uc3QgeyB1c2VyIH0gPSB1c2VBdXRoKCk7XG4gIGNvbnNvbGUubG9nKCdbREVCVUddIFVzZXIgZnJvbSBBdXRoQ29udGV4dCBpbiBEaXNjdXNzaW9uTWVzc2FnZXM6JywgdXNlcik7XG4gIFxuICBjb25zdCBbbWVzc2FnZXMsIHNldE1lc3NhZ2VzXSA9IHVzZVN0YXRlPE1lc3NhZ2VbXT4oW10pO1xuICBjb25zdCBbc3ViRGlzY3Vzc2lvbnMsIHNldFN1YkRpc2N1c3Npb25zXSA9IHVzZVN0YXRlPFN1YkRpc2N1c3Npb25bXT4oW10pO1xuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gIFxuICAvLyBIZWxwZXIgZnVuY3Rpb24gdG8gZm9ybWF0IGRhdGVzXG4gIGNvbnN0IGZvcm1hdERhdGUgPSAoZGF0ZTogRGF0ZSk6IHN0cmluZyA9PiB7XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBkaWZmSW5TZWNvbmRzID0gTWF0aC5mbG9vcigobm93LmdldFRpbWUoKSAtIGRhdGUuZ2V0VGltZSgpKSAvIDEwMDApO1xuICAgIFxuICAgIGlmIChkaWZmSW5TZWNvbmRzIDwgNjApIHtcbiAgICAgIHJldHVybiAnanVzdCBub3cnO1xuICAgIH0gZWxzZSBpZiAoZGlmZkluU2Vjb25kcyA8IDM2MDApIHtcbiAgICAgIGNvbnN0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKGRpZmZJblNlY29uZHMgLyA2MCk7XG4gICAgICByZXR1cm4gYCR7bWludXRlc30gJHttaW51dGVzID09PSAxID8gJ21pbnV0ZScgOiAnbWludXRlcyd9IGFnb2A7XG4gICAgfSBlbHNlIGlmIChkaWZmSW5TZWNvbmRzIDwgODY0MDApIHtcbiAgICAgIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcihkaWZmSW5TZWNvbmRzIC8gMzYwMCk7XG4gICAgICByZXR1cm4gYCR7aG91cnN9ICR7aG91cnMgPT09IDEgPyAnaG91cicgOiAnaG91cnMnfSBhZ29gO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBkYXlzID0gTWF0aC5mbG9vcihkaWZmSW5TZWNvbmRzIC8gODY0MDApO1xuICAgICAgcmV0dXJuIGAke2RheXN9ICR7ZGF5cyA9PT0gMSA/ICdkYXknIDogJ2RheXMnfSBhZ29gO1xuICAgIH1cbiAgfTtcbiAgXG4gIC8vIFRyYWNrIGxvY2FsbHkgYWRkZWQgbWVzc2FnZXMgdGhhdCBoYXZlbid0IGJlZW4gY29uZmlybWVkIGZyb20gdGhlIHNlcnZlciB5ZXRcbiAgY29uc3QgW3BlbmRpbmdNZXNzYWdlcywgc2V0UGVuZGluZ01lc3NhZ2VzXSA9IHVzZVN0YXRlPE1lc3NhZ2VbXT4oW10pO1xuICBcbiAgLy8gVXNlIGEgcmVmIHRvIHN0b3JlIHRoZSBwb2xsaW5nIGludGVydmFsIElEXG4gIGNvbnN0IHBvbGxpbmdJbnRlcnZhbFJlZiA9IHVzZVJlZjxOb2RlSlMuVGltZW91dCB8IG51bGw+KG51bGwpO1xuICBcbiAgLy8gRmV0Y2ggbWVzc2FnZXMgYW5kIHN1Yi1kaXNjdXNzaW9ucyBmcm9tIHRoZSBzZXJ2ZXJcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnW0RFQlVHXSBEaXNjdXNzaW9uTWVzc2FnZXMgdXNlRWZmZWN0IHJ1bm5pbmcgZm9yIGRpc2N1c3Npb25JZDonLCBkaXNjdXNzaW9uSWQpO1xuICAgIGxldCBpc01vdW50ZWQgPSB0cnVlOyAvLyBUcmFjayBpZiBjb21wb25lbnQgaXMgbW91bnRlZFxuICAgIFxuICAgIC8vIEZ1bmN0aW9uIHRvIGZldGNoIGRhdGEgd2l0aG91dCBzZXR0aW5nIHVwIHBvbGxpbmdcbiAgICBjb25zdCBmZXRjaERhdGEgPSBhc3luYyAoc2hvd0xvYWRpbmcgPSB0cnVlKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnW0RFQlVHXSBEaXNjdXNzaW9uTWVzc2FnZXMgZmV0Y2hEYXRhIGZ1bmN0aW9uIGNhbGxlZCcpO1xuICAgICAgaWYgKCFpc01vdW50ZWQpIHJldHVybjsgLy8gRG9uJ3QgcHJvY2VlZCBpZiBjb21wb25lbnQgaXMgdW5tb3VudGVkXG4gICAgICBcbiAgICAgIGlmIChwZW5kaW5nTWVzc2FnZXMubGVuZ3RoID4gMCB8fCAhc2hvd0xvYWRpbmcpIHtcbiAgICAgICAgLy8gRG9uJ3Qgc2hvdyBsb2FkaW5nIGluZGljYXRvciB3aGVuIHdlIGhhdmUgcGVuZGluZyBtZXNzYWdlc1xuICAgICAgICAvLyBvciB3aGVuIGV4cGxpY2l0bHkgcmVxdWVzdGVkIG5vdCB0b1xuICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0SXNMb2FkaW5nKHRydWUpO1xuICAgICAgfVxuICAgICAgXG4gICAgICB0cnkge1xuICAgICAgICBjb25zb2xlLmxvZygnW0RFQlVHXSBGZXRjaGluZyBtZXNzYWdlcyBhbmQgc3ViZGlzY3Vzc2lvbnMgZnJvbSBBUEknKTtcbiAgICAgICAgLy8gRmV0Y2ggbWVzc2FnZXMgZm9yIHRoZSBjdXJyZW50IGRpc2N1c3Npb25cbiAgICAgICAgY29uc3QgbWVzc2FnZXNSZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL21lc3NhZ2VzP2Rpc2N1c3Npb25JZD0ke2Rpc2N1c3Npb25JZH1gKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tERUJVR10gTWVzc2FnZXMgQVBJIHJlc3BvbnNlIHN0YXR1czonLCBtZXNzYWdlc1Jlc3BvbnNlLnN0YXR1cyk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBzdWJEaXNjdXNzaW9uc1Jlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvc3ViZGlzY3Vzc2lvbnM/ZGlzY3Vzc2lvbklkPSR7ZGlzY3Vzc2lvbklkfWApO1xuICAgICAgICBjb25zb2xlLmxvZygnW0RFQlVHXSBTdWJkaXNjdXNzaW9ucyBBUEkgcmVzcG9uc2Ugc3RhdHVzOicsIHN1YkRpc2N1c3Npb25zUmVzcG9uc2Uuc3RhdHVzKTtcbiAgICAgICAgXG4gICAgICAgIGlmICghaXNNb3VudGVkKSByZXR1cm47IC8vIERvbid0IHByb2NlZWQgaWYgY29tcG9uZW50IGlzIHVubW91bnRlZFxuICAgICAgICBcbiAgICAgICAgaWYgKCFtZXNzYWdlc1Jlc3BvbnNlLm9rIHx8ICFzdWJEaXNjdXNzaW9uc1Jlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignW0RFQlVHXSBBUEkgcmVzcG9uc2Ugbm90IE9LIC0gTWVzc2FnZXM6JywgbWVzc2FnZXNSZXNwb25zZS5zdGF0dXMsIG1lc3NhZ2VzUmVzcG9uc2Uuc3RhdHVzVGV4dCk7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignW0RFQlVHXSBBUEkgcmVzcG9uc2Ugbm90IE9LIC0gU3ViZGlzY3Vzc2lvbnM6Jywgc3ViRGlzY3Vzc2lvbnNSZXNwb25zZS5zdGF0dXMsIHN1YkRpc2N1c3Npb25zUmVzcG9uc2Uuc3RhdHVzVGV4dCk7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggZGF0YScpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCBtZXNzYWdlc0RhdGEgPSBhd2FpdCBtZXNzYWdlc1Jlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgY29uc3Qgc3ViRGlzY3Vzc2lvbnNEYXRhID0gYXdhaXQgc3ViRGlzY3Vzc2lvbnNSZXNwb25zZS5qc29uKCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWlzTW91bnRlZCkgcmV0dXJuOyAvLyBEb24ndCBwcm9jZWVkIGlmIGNvbXBvbmVudCBpcyB1bm1vdW50ZWRcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKCdbREVCVUddIFJhdyBtZXNzYWdlcyBkYXRhOicsIG1lc3NhZ2VzRGF0YSk7XG4gICAgICAgIFxuICAgICAgICAvLyBTZXBhcmF0ZSBtZXNzYWdlcyBpbnRvIG1haW4gZGlzY3Vzc2lvbiBtZXNzYWdlcyBhbmQgc3ViLWRpc2N1c3Npb24gbWVzc2FnZXNcbiAgICAgICAgY29uc3QgbWFpbkRpc2N1c3Npb25NZXNzYWdlczogTWVzc2FnZVtdID0gW107XG4gICAgICAgIGNvbnN0IHN1YkRpc2N1c3Npb25NZXNzYWdlc01hcCA9IG5ldyBNYXA8bnVtYmVyLCBNZXNzYWdlW10+KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBQcm9jZXNzIGFsbCBtZXNzYWdlc1xuICAgICAgICBtZXNzYWdlc0RhdGEuZm9yRWFjaCgobTogYW55KSA9PiB7XG4gICAgICAgICAgY29uc3QgZm9ybWF0dGVkTWVzc2FnZSA9IHtcbiAgICAgICAgICAgIGlkOiBtLmlkLFxuICAgICAgICAgICAgYXV0aG9yOiBtLmF1dGhvcixcbiAgICAgICAgICAgIGNvbnRlbnQ6IG0uY29udGVudCxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogZm9ybWF0RGF0ZShuZXcgRGF0ZShtLmNyZWF0ZWRfYXQpKSxcbiAgICAgICAgICAgIHNlcnZlcklkOiBtLmlkIC8vIFN0b3JlIHRoZSBzZXJ2ZXIgSUQgZm9yIHJlZmVyZW5jZVxuICAgICAgICAgIH07XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKG0uc3ViZGlzY3Vzc2lvbl9pZCkge1xuICAgICAgICAgICAgLy8gVGhpcyBpcyBhIHN1Yi1kaXNjdXNzaW9uIG1lc3NhZ2VcbiAgICAgICAgICAgIGNvbnN0IHN1YklkID0gbS5zdWJkaXNjdXNzaW9uX2lkO1xuICAgICAgICAgICAgaWYgKCFzdWJEaXNjdXNzaW9uTWVzc2FnZXNNYXAuaGFzKHN1YklkKSkge1xuICAgICAgICAgICAgICBzdWJEaXNjdXNzaW9uTWVzc2FnZXNNYXAuc2V0KHN1YklkLCBbXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdWJEaXNjdXNzaW9uTWVzc2FnZXNNYXAuZ2V0KHN1YklkKT8ucHVzaChmb3JtYXR0ZWRNZXNzYWdlKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbREVCVUddIEFkZGVkIG1lc3NhZ2UgdG8gc3ViLWRpc2N1c3Npb24gJHtzdWJJZH06YCwgZm9ybWF0dGVkTWVzc2FnZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBtYWluIGRpc2N1c3Npb24gbWVzc2FnZVxuICAgICAgICAgICAgbWFpbkRpc2N1c3Npb25NZXNzYWdlcy5wdXNoKGZvcm1hdHRlZE1lc3NhZ2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBUcmFuc2Zvcm0gc3ViLWRpc2N1c3Npb25zIGRhdGEgYW5kIGFzc29jaWF0ZSBtZXNzYWdlc1xuICAgICAgICBjb25zdCBmb3JtYXR0ZWRTdWJEaXNjdXNzaW9ucyA9IHN1YkRpc2N1c3Npb25zRGF0YS5tYXAoKHM6IGFueSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHN1Yk1lc3NhZ2VzID0gc3ViRGlzY3Vzc2lvbk1lc3NhZ2VzTWFwLmdldChzLmlkKSB8fCBbXTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgW0RFQlVHXSBTdWItZGlzY3Vzc2lvbiAke3MuaWR9IGhhcyAke3N1Yk1lc3NhZ2VzLmxlbmd0aH0gbWVzc2FnZXNgKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIGxhc3QgbWVzc2FnZSB0aW1lc3RhbXBcbiAgICAgICAgICBsZXQgbGFzdE1lc3NhZ2VUaW1lID0gcy5jcmVhdGVkX2F0O1xuICAgICAgICAgIGlmIChzdWJNZXNzYWdlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyBGaW5kIHRoZSBtb3N0IHJlY2VudCBtZXNzYWdlIHRpbWVzdGFtcCBieSBsb29raW5nIGF0IGFsbCBtZXNzYWdlc1xuICAgICAgICAgICAgLy8gVGhpcyBpcyBhIGZhbGxiYWNrIGluIGNhc2UgdGhlIG1lc3NhZ2VzIGFyZW4ndCBhbHJlYWR5IHNvcnRlZFxuICAgICAgICAgICAgbGFzdE1lc3NhZ2VUaW1lID0gc3ViTWVzc2FnZXMucmVkdWNlKChsYXRlc3QsIG1zZykgPT4ge1xuICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGlzIG1lc3NhZ2UgdGltZXN0YW1wIGlzIG1vcmUgcmVjZW50XG4gICAgICAgICAgICAgIGNvbnN0IG1zZ1RpbWUgPSBuZXcgRGF0ZShtc2cudGltZXN0YW1wKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICAgIHJldHVybiBtc2dUaW1lID4gbGF0ZXN0ID8gbXNnVGltZSA6IGxhdGVzdDtcbiAgICAgICAgICAgIH0sIG5ldyBEYXRlKHMuY3JlYXRlZF9hdCkuZ2V0VGltZSgpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiBzLmlkLFxuICAgICAgICAgICAgdGl0bGU6IHMudGl0bGUsXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IGZvcm1hdERhdGUobmV3IERhdGUocy5jcmVhdGVkX2F0KSksXG4gICAgICAgICAgICBsYXN0TWVzc2FnZUF0OiBmb3JtYXREYXRlKG5ldyBEYXRlKGxhc3RNZXNzYWdlVGltZSkpLFxuICAgICAgICAgICAgbWVzc2FnZXM6IHN1Yk1lc3NhZ2VzLFxuICAgICAgICAgICAgcHJvZ3Jlc3M6IHMucHJvZ3Jlc3MgfHwgMFxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gU2V0IG1haW4gZGlzY3Vzc2lvbiBtZXNzYWdlc1xuICAgICAgICBjb25zdCBmb3JtYXR0ZWRNZXNzYWdlcyA9IG1haW5EaXNjdXNzaW9uTWVzc2FnZXM7XG4gICAgICAgIFxuICAgICAgICAvLyBJZiB3ZSBoYXZlIGEgc2VsZWN0ZWQgc3ViLWRpc2N1c3Npb24sIHVwZGF0ZSBpdHMgbWVzc2FnZXNcbiAgICAgICAgaWYgKHNlbGVjdGVkU3ViRGlzY3Vzc2lvbikge1xuICAgICAgICAgIGNvbnN0IHVwZGF0ZWRTdWJEaXNjdXNzaW9uID0gZm9ybWF0dGVkU3ViRGlzY3Vzc2lvbnMuZmluZCgoc2Q6IFN1YkRpc2N1c3Npb24pID0+IHNkLmlkID09PSBzZWxlY3RlZFN1YkRpc2N1c3Npb24uaWQpO1xuICAgICAgICAgIGlmICh1cGRhdGVkU3ViRGlzY3Vzc2lvbikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFtERUJVR10gVXBkYXRpbmcgc2VsZWN0ZWQgc3ViLWRpc2N1c3Npb24gJHtzZWxlY3RlZFN1YkRpc2N1c3Npb24uaWR9IHdpdGggJHt1cGRhdGVkU3ViRGlzY3Vzc2lvbi5tZXNzYWdlcy5sZW5ndGh9IG1lc3NhZ2VzYCk7XG4gICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHNlbGVjdGVkIHN1Yi1kaXNjdXNzaW9uIHdpdGggbmV3IG1lc3NhZ2VzIGZyb20gdGhlIHNlcnZlclxuICAgICAgICAgICAgc2V0U2VsZWN0ZWRTdWJEaXNjdXNzaW9uKHVwZGF0ZWRTdWJEaXNjdXNzaW9uKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGlmIGFueSBwZW5kaW5nIG1lc3NhZ2VzIGhhdmUgYmVlbiBjb25maXJtZWQgYnkgdGhlIHNlcnZlclxuICAgICAgICBjb25zdCBjb25maXJtZWRNZXNzYWdlSWRzID0gZm9ybWF0dGVkTWVzc2FnZXMubWFwKChtOiBNZXNzYWdlKSA9PiBtLnNlcnZlcklkKTtcbiAgICAgICAgY29uc3Qgc3RpbGxQZW5kaW5nTWVzc2FnZXMgPSBwZW5kaW5nTWVzc2FnZXMuZmlsdGVyKHBtID0+IHtcbiAgICAgICAgICAvLyBLZWVwIG1lc3NhZ2VzIHRoYXQgZG9uJ3QgaGF2ZSBhIHNlcnZlciBJRCB5ZXQgb3Igd2hvc2UgSUQgaXNuJ3QgaW4gdGhlIGNvbmZpcm1lZCBsaXN0XG4gICAgICAgICAgcmV0dXJuICFwbS5zZXJ2ZXJJZCB8fCAhY29uZmlybWVkTWVzc2FnZUlkcy5pbmNsdWRlcyhwbS5zZXJ2ZXJJZCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQ29tYmluZSBzZXJ2ZXIgbWVzc2FnZXMgd2l0aCBhbnkgcGVuZGluZyBtZXNzYWdlcyB0aGF0IGhhdmVuJ3QgYmVlbiBjb25maXJtZWQgeWV0XG4gICAgICAgIGNvbnN0IGNvbWJpbmVkTWVzc2FnZXMgPSBbLi4uZm9ybWF0dGVkTWVzc2FnZXMsIC4uLnN0aWxsUGVuZGluZ01lc3NhZ2VzXTtcbiAgICAgICAgXG4gICAgICAgIGlmICghaXNNb3VudGVkKSByZXR1cm47IC8vIERvbid0IHByb2NlZWQgaWYgY29tcG9uZW50IGlzIHVubW91bnRlZFxuICAgICAgICBcbiAgICAgICAgc2V0TWVzc2FnZXMoY29tYmluZWRNZXNzYWdlcyk7XG4gICAgICAgIHNldFBlbmRpbmdNZXNzYWdlcyhzdGlsbFBlbmRpbmdNZXNzYWdlcyk7XG4gICAgICAgIHNldFN1YkRpc2N1c3Npb25zKGZvcm1hdHRlZFN1YkRpc2N1c3Npb25zKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tERUJVR10gRXJyb3IgZmV0Y2hpbmcgZGF0YTonLCBlcnJvcik7XG4gICAgICAgIC8vIE9ubHkgdXNlIGZhbGxiYWNrIGRhdGEgaWYgd2UgaGF2ZSBubyBtZXNzYWdlcyB5ZXQgYW5kIGNvbXBvbmVudCBpcyBzdGlsbCBtb3VudGVkXG4gICAgICAgIGlmIChpc01vdW50ZWQgJiYgbWVzc2FnZXMubGVuZ3RoID09PSAwICYmIHBlbmRpbmdNZXNzYWdlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBzZXRNZXNzYWdlcyhbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGlkOiAxLFxuICAgICAgICAgICAgICBhdXRob3I6ICdBYmhpc2hlayBZYWRhdicsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6ICdIaSBldmVyeW9uZSwgSSBjcmVhdGVkIHRoaXMgZGlzY3Vzc2lvbiB0byB0YWxrIGFib3V0IHRoZSB1cGNvbWluZyBwcm9qZWN0LicsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogJzIgZGF5cyBhZ28nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6IDIsXG4gICAgICAgICAgICAgIGF1dGhvcjogJ0RhaXdpayBOZWVtYScsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6ICdUaGFua3MgZm9yIHNldHRpbmcgdGhpcyB1cCEgSSBoYXZlIGEgZmV3IGlkZWFzIElcXCdkIGxpa2UgdG8gc2hhcmUuJyxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiAnMSBkYXkgYWdvJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGlkOiAzLFxuICAgICAgICAgICAgICBhdXRob3I6ICdZYW5nIExpdScsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6ICdJXFwndmUgYmVlbiB3b3JraW5nIG9uIHNvbWUgZGVzaWducyB0aGF0IG1pZ2h0IGJlIHJlbGV2YW50IGhlcmUuJyxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiAnMTAgaG91cnMgYWdvJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSk7XG4gICAgICAgICAgXG4gICAgICAgICAgc2V0U3ViRGlzY3Vzc2lvbnMoW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBpZDogMSxcbiAgICAgICAgICAgICAgdGl0bGU6IFwiVUkgSW1wbGVtZW50YXRpb24gUGxhblwiLFxuICAgICAgICAgICAgICBjcmVhdGVkQXQ6IFwiMSBkYXkgYWdvXCIsXG4gICAgICAgICAgICAgIGxhc3RNZXNzYWdlQXQ6IFwiMSBkYXkgYWdvXCIsXG4gICAgICAgICAgICAgIG1lc3NhZ2VzOiBbXSxcbiAgICAgICAgICAgICAgcHJvZ3Jlc3M6IDMwXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXSk7XG4gICAgICAgIH1cbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGlmIChpc01vdW50ZWQpIHtcbiAgICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBcbiAgICAvLyBJbml0aWFsIGRhdGEgZmV0Y2hcbiAgICBmZXRjaERhdGEoKTtcbiAgICBcbiAgICAvLyBTZXQgdXAgcG9sbGluZyB0byByZWZyZXNoIGRhdGEgZXZlcnkgMTAgc2Vjb25kcywgYnV0IG9ubHkgZm9yIG5ldyBtZXNzYWdlc1xuICAgIC8vIG5vdCBmb3IgcmUtcmVuZGVyaW5nIHRoZSBlbnRpcmUgY29tcG9uZW50XG4gICAgaWYgKHBvbGxpbmdJbnRlcnZhbFJlZi5jdXJyZW50KSB7XG4gICAgICBjbGVhckludGVydmFsKHBvbGxpbmdJbnRlcnZhbFJlZi5jdXJyZW50KTtcbiAgICB9XG4gICAgXG4gICAgcG9sbGluZ0ludGVydmFsUmVmLmN1cnJlbnQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAvLyBVc2UgdGhlIHNpbGVudCBmZXRjaCBvcHRpb24gdG8gYXZvaWQgc2hvd2luZyBsb2FkaW5nIGluZGljYXRvcnMgZHVyaW5nIHBvbGxpbmdcbiAgICAgIGZldGNoRGF0YShmYWxzZSk7XG4gICAgfSwgMTAwMDApOyAvLyBJbmNyZWFzZWQgdG8gMTAgc2Vjb25kcyB0byByZWR1Y2UgbG9hZFxuICAgIFxuICAgIC8vIENsZWFudXAgZnVuY3Rpb24gdG8gcHJldmVudCBtZW1vcnkgbGVha3MgYW5kIHN0YXRlIHVwZGF0ZXMgYWZ0ZXIgdW5tb3VudFxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpc01vdW50ZWQgPSBmYWxzZTtcbiAgICAgIGlmIChwb2xsaW5nSW50ZXJ2YWxSZWYuY3VycmVudCkge1xuICAgICAgICBjbGVhckludGVydmFsKHBvbGxpbmdJbnRlcnZhbFJlZi5jdXJyZW50KTtcbiAgICAgICAgcG9sbGluZ0ludGVydmFsUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coJ1tERUJVR10gRGlzY3Vzc2lvbk1lc3NhZ2VzIGNsZWFudXAgLSBpbnRlcnZhbCBjbGVhcmVkIGZvciBkaXNjdXNzaW9uSWQ6JywgZGlzY3Vzc2lvbklkKTtcbiAgICB9O1xuICB9LCBbZGlzY3Vzc2lvbklkXSk7IC8vIE9ubHkgcmUtcnVuIHdoZW4gZGlzY3Vzc2lvbklkIGNoYW5nZXNcbiAgXG4gIGNvbnN0IFtzZWxlY3RlZFN1YkRpc2N1c3Npb24sIHNldFNlbGVjdGVkU3ViRGlzY3Vzc2lvbl0gPSB1c2VTdGF0ZTxTdWJEaXNjdXNzaW9uIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtpc05ld1N1YkRpc2N1c3Npb25PcGVuLCBzZXRJc05ld1N1YkRpc2N1c3Npb25PcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW25ld1N1YkRpc2N1c3Npb25UaXRsZSwgc2V0TmV3U3ViRGlzY3Vzc2lvblRpdGxlXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbbmV3TWVzc2FnZSwgc2V0TmV3TWVzc2FnZV0gPSB1c2VTdGF0ZSgnJyk7XG4gIFxuICBjb25zdCBoYW5kbGVOZXdTdWJEaXNjdXNzaW9uID0gKCkgPT4ge1xuICAgIHNldElzTmV3U3ViRGlzY3Vzc2lvbk9wZW4odHJ1ZSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlQ3JlYXRlU3ViRGlzY3Vzc2lvbiA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAobmV3U3ViRGlzY3Vzc2lvblRpdGxlLnRyaW0oKSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tERUJVR10gQ3JlYXRpbmcgc3ViLWRpc2N1c3Npb24gd2l0aCBkaXNjdXNzaW9uSWQ6JywgZGlzY3Vzc2lvbklkKTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9zdWJkaXNjdXNzaW9ucycsIHtcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7bG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2F1dGhfdG9rZW4nKSB8fCAnZGVmYXVsdC10b2tlbid9YCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIGRpc2N1c3Npb25JZDogZGlzY3Vzc2lvbklkLFxuICAgICAgICAgICAgdGl0bGU6IG5ld1N1YkRpc2N1c3Npb25UaXRsZS50cmltKClcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBzdWItZGlzY3Vzc2lvbicpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbmV3U3ViRGlzY3Vzc2lvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCB0aGUgbmV3IHN1Yi1kaXNjdXNzaW9uIHRvIHRoZSBzdGF0ZVxuICAgICAgICBzZXRTdWJEaXNjdXNzaW9ucyhwcmV2ID0+IFsuLi5wcmV2LCB7XG4gICAgICAgICAgaWQ6IG5ld1N1YkRpc2N1c3Npb24uaWQsXG4gICAgICAgICAgdGl0bGU6IG5ld1N1YkRpc2N1c3Npb24udGl0bGUsXG4gICAgICAgICAgY3JlYXRlZEF0OiAnanVzdCBub3cnLFxuICAgICAgICAgIGxhc3RNZXNzYWdlQXQ6ICdqdXN0IG5vdycsXG4gICAgICAgICAgbWVzc2FnZXM6IFtdLFxuICAgICAgICAgIHByb2dyZXNzOiAwXG4gICAgICAgIH1dKTtcbiAgICAgICAgXG4gICAgICAgIHNldE5ld1N1YkRpc2N1c3Npb25UaXRsZSgnJyk7XG4gICAgICAgIHNldElzTmV3U3ViRGlzY3Vzc2lvbk9wZW4oZmFsc2UpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgc3ViLWRpc2N1c3Npb246JywgZXJyb3IpO1xuICAgICAgICBcbiAgICAgICAgLy8gRmFsbGJhY2sgdG8gY2xpZW50LXNpZGUgY3JlYXRpb24gaWYgQVBJIGZhaWxzXG4gICAgICAgIHNldFN1YkRpc2N1c3Npb25zKHByZXYgPT4gWy4uLnByZXYsIHtcbiAgICAgICAgICBpZDogRGF0ZS5ub3coKSwgLy8gVXNlIHRpbWVzdGFtcCBhcyB0ZW1wb3JhcnkgSURcbiAgICAgICAgICB0aXRsZTogbmV3U3ViRGlzY3Vzc2lvblRpdGxlLnRyaW0oKSxcbiAgICAgICAgICBjcmVhdGVkQXQ6IFwianVzdCBub3dcIixcbiAgICAgICAgICBsYXN0TWVzc2FnZUF0OiBcImp1c3Qgbm93XCIsXG4gICAgICAgICAgbWVzc2FnZXM6IFtdLFxuICAgICAgICAgIHByb2dyZXNzOiAwXG4gICAgICAgIH1dKTtcbiAgICAgICAgXG4gICAgICAgIHNldE5ld1N1YkRpc2N1c3Npb25UaXRsZSgnJyk7XG4gICAgICAgIHNldElzTmV3U3ViRGlzY3Vzc2lvbk9wZW4oZmFsc2UpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVTZW5kTWVzc2FnZSA9IGFzeW5jIChlOiBSZWFjdC5Gb3JtRXZlbnQpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgaWYgKG5ld01lc3NhZ2UudHJpbSgpKSB7XG4gICAgICAvLyBDcmVhdGUgYSB0ZW1wb3JhcnkgSUQgZm9yIHRoZSBwZW5kaW5nIG1lc3NhZ2VcbiAgICAgIGNvbnN0IHRlbXBJZCA9IGB0ZW1wLSR7RGF0ZS5ub3coKX1gO1xuICAgICAgXG4gICAgICAvLyBDcmVhdGUgYSBwZW5kaW5nIG1lc3NhZ2UgdG8gc2hvdyBpbW1lZGlhdGVseVxuICAgICAgY29uc3QgcGVuZGluZ01lc3NhZ2UgPSB7XG4gICAgICAgIGlkOiB0ZW1wSWQsXG4gICAgICAgIGF1dGhvcjogdXNlcj8uZnVsbF9uYW1lIHx8ICdZb3UnLFxuICAgICAgICBjb250ZW50OiBuZXdNZXNzYWdlLnRyaW0oKSxcbiAgICAgICAgdGltZXN0YW1wOiAnanVzdCBub3cnLFxuICAgICAgICBpc1BlbmRpbmc6IHRydWVcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdbREVCVUddIENyZWF0aW5nIHBlbmRpbmcgbWVzc2FnZTonLCBwZW5kaW5nTWVzc2FnZSk7XG4gICAgICBjb25zb2xlLmxvZygnW0RFQlVHXSBTZWxlY3RlZCBzdWItZGlzY3Vzc2lvbjonLCBzZWxlY3RlZFN1YkRpc2N1c3Npb24gPyBzZWxlY3RlZFN1YkRpc2N1c3Npb24uaWQgOiAnbm9uZScpO1xuICAgICAgXG4gICAgICAvLyBBZGQgdGhlIHBlbmRpbmcgbWVzc2FnZSB0byB0aGUgVUkgaW1tZWRpYXRlbHlcbiAgICAgIGlmIChzZWxlY3RlZFN1YkRpc2N1c3Npb24pIHtcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBzZWxlY3RlZCBzdWItZGlzY3Vzc2lvbiB3aXRoIHRoZSBuZXcgbWVzc2FnZVxuICAgICAgICBjb25zdCB1cGRhdGVkU3ViRGlzY3Vzc2lvbiA9IHtcbiAgICAgICAgICAuLi5zZWxlY3RlZFN1YkRpc2N1c3Npb24sXG4gICAgICAgICAgbWVzc2FnZXM6IFsuLi5zZWxlY3RlZFN1YkRpc2N1c3Npb24ubWVzc2FnZXMsIHBlbmRpbmdNZXNzYWdlXSxcbiAgICAgICAgICBsYXN0TWVzc2FnZUF0OiAnanVzdCBub3cnXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAvLyBVcGRhdGUgdGhlIHN1Yi1kaXNjdXNzaW9uIGluIHRoZSBzdGF0ZVxuICAgICAgICBzZXRTdWJEaXNjdXNzaW9ucyhwcmV2ID0+IHByZXYubWFwKHN1YiA9PiBcbiAgICAgICAgICBzdWIuaWQgPT09IHNlbGVjdGVkU3ViRGlzY3Vzc2lvbi5pZCA/IHVwZGF0ZWRTdWJEaXNjdXNzaW9uIDogc3ViXG4gICAgICAgICkpO1xuICAgICAgICBcbiAgICAgICAgLy8gQWxzbyB1cGRhdGUgdGhlIHNlbGVjdGVkU3ViRGlzY3Vzc2lvbiBzdGF0ZSB0byBzaG93IHRoZSBtZXNzYWdlIGltbWVkaWF0ZWx5XG4gICAgICAgIHNldFNlbGVjdGVkU3ViRGlzY3Vzc2lvbih1cGRhdGVkU3ViRGlzY3Vzc2lvbik7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbREVCVUddIEFkZGVkIG1lc3NhZ2UgdG8gc3ViLWRpc2N1c3Npb24gVUk6JywgdXBkYXRlZFN1YkRpc2N1c3Npb24ubWVzc2FnZXMubGVuZ3RoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEFkZCB0byBib3RoIG1lc3NhZ2VzIGFuZCBwZW5kaW5nTWVzc2FnZXMgZm9yIG1haW4gZGlzY3Vzc2lvblxuICAgICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFsuLi5wcmV2LCBwZW5kaW5nTWVzc2FnZV0pO1xuICAgICAgICBzZXRQZW5kaW5nTWVzc2FnZXMocHJldiA9PiBbLi4ucHJldiwgcGVuZGluZ01lc3NhZ2VdKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tERUJVR10gQWRkZWQgbWVzc2FnZSB0byBtYWluIGRpc2N1c3Npb24gVUknKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2xlYXIgdGhlIGlucHV0IGZpZWxkIGltbWVkaWF0ZWx5XG4gICAgICBzZXROZXdNZXNzYWdlKCcnKTtcbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gU2VuZCB0aGUgbWVzc2FnZSB0byB0aGUgc2VydmVyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvbWVzc2FnZXMnLCB7XG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke2xvY2FsU3RvcmFnZS5nZXRJdGVtKCdhdXRoX3Rva2VuJykgfHwgJ2RlZmF1bHQtdG9rZW4nfWAsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBkaXNjdXNzaW9uX2lkOiBkaXNjdXNzaW9uSWQsXG4gICAgICAgICAgICBzdWJkaXNjdXNzaW9uX2lkOiBzZWxlY3RlZFN1YkRpc2N1c3Npb24/LmlkIHx8IG51bGwsXG4gICAgICAgICAgICBjb250ZW50OiBwZW5kaW5nTWVzc2FnZS5jb250ZW50LFxuICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXI/LmZ1bGxfbmFtZSB8fCAnQW5vbnltb3VzJ1xuICAgICAgICAgIH0pLFxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gc2VuZCBtZXNzYWdlJyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBuZXdNZXNzYWdlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKCdbREVCVUddIE1lc3NhZ2Ugc2F2ZWQgdG8gc2VydmVyIHdpdGggSUQ6JywgbmV3TWVzc2FnZURhdGEuaWQpO1xuICAgICAgICBcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBwZW5kaW5nIG1lc3NhZ2Ugd2l0aCB0aGUgc2VydmVyIElEXG4gICAgICAgIGlmIChzZWxlY3RlZFN1YkRpc2N1c3Npb24pIHtcbiAgICAgICAgICAvLyBDcmVhdGUgdXBkYXRlZCBtZXNzYWdlcyBhcnJheSB3aXRoIHRoZSBzZXJ2ZXIgSURcbiAgICAgICAgICBjb25zdCB1cGRhdGVkTWVzc2FnZXMgPSBzZWxlY3RlZFN1YkRpc2N1c3Npb24ubWVzc2FnZXMubWFwKG1zZyA9PiBcbiAgICAgICAgICAgIG1zZy5pZC50b1N0cmluZygpID09PSB0ZW1wSWRcbiAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAuLi5tc2csXG4gICAgICAgICAgICAgICAgICBpZDogbmV3TWVzc2FnZURhdGEuaWQsXG4gICAgICAgICAgICAgICAgICBzZXJ2ZXJJZDogbmV3TWVzc2FnZURhdGEuaWQsXG4gICAgICAgICAgICAgICAgICBpc1BlbmRpbmc6IGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICA6IG1zZ1xuICAgICAgICAgICk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ3JlYXRlIHVwZGF0ZWQgc3ViLWRpc2N1c3Npb24gb2JqZWN0XG4gICAgICAgICAgY29uc3QgdXBkYXRlZFN1YkRpc2N1c3Npb24gPSB7XG4gICAgICAgICAgICAuLi5zZWxlY3RlZFN1YkRpc2N1c3Npb24sXG4gICAgICAgICAgICBtZXNzYWdlczogdXBkYXRlZE1lc3NhZ2VzLFxuICAgICAgICAgICAgbGFzdE1lc3NhZ2VBdDogJ2p1c3Qgbm93J1xuICAgICAgICAgIH07XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVXBkYXRlIHRoZSBzdWItZGlzY3Vzc2lvbiBpbiB0aGUgc3RhdGVcbiAgICAgICAgICBzZXRTdWJEaXNjdXNzaW9ucyhwcmV2ID0+IHByZXYubWFwKHN1YiA9PiBcbiAgICAgICAgICAgIHN1Yi5pZCA9PT0gc2VsZWN0ZWRTdWJEaXNjdXNzaW9uLmlkID8gdXBkYXRlZFN1YkRpc2N1c3Npb24gOiBzdWJcbiAgICAgICAgICApKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBbHNvIHVwZGF0ZSB0aGUgc2VsZWN0ZWRTdWJEaXNjdXNzaW9uIHN0YXRlIHRvIHNob3cgdGhlIGNvbmZpcm1lZCBtZXNzYWdlXG4gICAgICAgICAgc2V0U2VsZWN0ZWRTdWJEaXNjdXNzaW9uKHVwZGF0ZWRTdWJEaXNjdXNzaW9uKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygnW0RFQlVHXSBVcGRhdGVkIHN1Yi1kaXNjdXNzaW9uIG1lc3NhZ2VzIHdpdGggc2VydmVyIElEOicsIHVwZGF0ZWRNZXNzYWdlcy5sZW5ndGgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFVwZGF0ZSBtYWluIGRpc2N1c3Npb24gbWVzc2FnZXNcbiAgICAgICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IHByZXYubWFwKG1zZyA9PiBcbiAgICAgICAgICAgIG1zZy5pZC50b1N0cmluZygpID09PSB0ZW1wSWRcbiAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAuLi5tc2csXG4gICAgICAgICAgICAgICAgICBpZDogbmV3TWVzc2FnZURhdGEuaWQsXG4gICAgICAgICAgICAgICAgICBzZXJ2ZXJJZDogbmV3TWVzc2FnZURhdGEuaWQsXG4gICAgICAgICAgICAgICAgICBpc1BlbmRpbmc6IGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICA6IG1zZ1xuICAgICAgICAgICkpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgcGVuZGluZyBtZXNzYWdlIGluIHRoZSBwZW5kaW5nTWVzc2FnZXMgYXJyYXlcbiAgICAgICAgICBzZXRQZW5kaW5nTWVzc2FnZXMocHJldiA9PiBwcmV2Lm1hcChtc2cgPT4gXG4gICAgICAgICAgICBtc2cuaWQudG9TdHJpbmcoKSA9PT0gdGVtcElkXG4gICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgLi4ubXNnLFxuICAgICAgICAgICAgICAgICAgaWQ6IG5ld01lc3NhZ2VEYXRhLmlkLFxuICAgICAgICAgICAgICAgICAgc2VydmVySWQ6IG5ld01lc3NhZ2VEYXRhLmlkLFxuICAgICAgICAgICAgICAgICAgaXNQZW5kaW5nOiBmYWxzZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgOiBtc2dcbiAgICAgICAgICApKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygnW0RFQlVHXSBVcGRhdGVkIG1haW4gZGlzY3Vzc2lvbiBtZXNzYWdlcyB3aXRoIHNlcnZlciBJRCcpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZW5kaW5nIG1lc3NhZ2U6JywgZXJyb3IpO1xuICAgICAgICAvLyBUaGUgbWVzc2FnZSBpcyBhbHJlYWR5IGluIHRoZSBVSSwgc28gd2UgZG9uJ3QgbmVlZCB0byBhZGQgaXQgYWdhaW5cbiAgICAgICAgLy8gSnVzdCBtYXJrIGl0IGFzIGZhaWxlZCBzbyB0aGUgdXNlciBrbm93cyBpdCBkaWRuJ3Qgc2VuZFxuICAgICAgICBpZiAoc2VsZWN0ZWRTdWJEaXNjdXNzaW9uKSB7XG4gICAgICAgICAgc2V0U3ViRGlzY3Vzc2lvbnMocHJldiA9PiBwcmV2Lm1hcChzdWIgPT4gXG4gICAgICAgICAgICBzdWIuaWQgPT09IHNlbGVjdGVkU3ViRGlzY3Vzc2lvbi5pZFxuICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgIC4uLnN1YixcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiBzdWIubWVzc2FnZXMubWFwKG1zZyA9PiBcbiAgICAgICAgICAgICAgICAgICAgbXNnLmlkLnRvU3RyaW5nKCkgPT09IHRlbXBJZFxuICAgICAgICAgICAgICAgICAgICAgID8geyAuLi5tc2csIGZhaWxlZDogdHJ1ZSB9XG4gICAgICAgICAgICAgICAgICAgICAgOiBtc2dcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIDogc3ViXG4gICAgICAgICAgKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiBwcmV2Lm1hcChtc2cgPT4gXG4gICAgICAgICAgICBtc2cuaWQudG9TdHJpbmcoKSA9PT0gdGVtcElkXG4gICAgICAgICAgICAgID8geyAuLi5tc2csIGZhaWxlZDogdHJ1ZSB9XG4gICAgICAgICAgICAgIDogbXNnXG4gICAgICAgICAgKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInAtNlwiPlxuICAgICAge2lzTG9hZGluZyAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWNlbnRlciBpdGVtcy1jZW50ZXIgcHktOFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYW5pbWF0ZS1zcGluIHJvdW5kZWQtZnVsbCBoLTggdy04IGJvcmRlci1iLTIgYm9yZGVyLWluZGlnby02MDBcIj48L2Rpdj5cbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJtbC0yIHRleHQtZ3JheS02MDBcIj5Mb2FkaW5nIG1lc3NhZ2VzLi4uPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBtYi02XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTRcIj5cbiAgICAgICAgICA8QnV0dG9uIFxuICAgICAgICAgICAgb25DbGljaz17c2VsZWN0ZWRTdWJEaXNjdXNzaW9uID8gKCkgPT4gc2V0U2VsZWN0ZWRTdWJEaXNjdXNzaW9uKG51bGwpIDogb25CYWNrfVxuICAgICAgICAgICAgdmFyaWFudD1cIm91dGxpbmVcIlxuICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTYwMCBob3Zlcjp0ZXh0LWdyYXktOTAwXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICDihpAgQmFja1xuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwidGV4dC14bCBmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDBcIj5cbiAgICAgICAgICAgICAge3NlbGVjdGVkU3ViRGlzY3Vzc2lvbiA/IHNlbGVjdGVkU3ViRGlzY3Vzc2lvbi50aXRsZSA6IGRpc2N1c3Npb25UaXRsZX1cbiAgICAgICAgICAgIDwvaDI+XG4gICAgICAgICAgICB7c2VsZWN0ZWRTdWJEaXNjdXNzaW9uICYmIHNlbGVjdGVkU3ViRGlzY3Vzc2lvbi5wcm9ncmVzcyAhPT0gdW5kZWZpbmVkICYmIChcbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LWdyYXktNjAwXCI+XG4gICAgICAgICAgICAgICAgUHJvZ3Jlc3M6IHtzZWxlY3RlZFN1YkRpc2N1c3Npb24ucHJvZ3Jlc3N9JVxuICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGdhcC0yXCI+XG4gICAgICAgICAgeyFzZWxlY3RlZFN1YkRpc2N1c3Npb24gJiYgKFxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVOZXdTdWJEaXNjdXNzaW9ufVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1ibHVlLTYwMCBob3ZlcjpiZy1ibHVlLTcwMCB0ZXh0LXdoaXRlXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgKyBOZXcgU3ViLWRpc2N1c3Npb25cbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIHshc2VsZWN0ZWRTdWJEaXNjdXNzaW9uICYmIHN1YkRpc2N1c3Npb25zLmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTZcIj5cbiAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC1sZyBmb250LW1lZGl1bSB0ZXh0LWdyYXktOTAwIG1iLTNcIj5TdWItZGlzY3Vzc2lvbnM8L2gzPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0yXCI+XG4gICAgICAgICAgICB7c3ViRGlzY3Vzc2lvbnMubWFwKChzdWIpID0+IChcbiAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGtleT17c3ViLmlkfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNlbGVjdGVkU3ViRGlzY3Vzc2lvbihzdWIpfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInAtMyBib3JkZXIgcm91bmRlZC1tZCBob3ZlcjpiZy1ibHVlLTUwIGN1cnNvci1wb2ludGVyIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9XCJmb250LW1lZGl1bSB0ZXh0LWdyYXktOTAwXCI+e3N1Yi50aXRsZX08L2g0PlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICAgICAge3N1Yi5tZXNzYWdlcy5sZW5ndGh9IG1lc3NhZ2VzIOKAoiBMYXN0IG1lc3NhZ2Uge3N1Yi5sYXN0TWVzc2FnZUF0fVxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktNCBtYi02IG1heC1oLVs2MDBweF0gb3ZlcmZsb3cteS1hdXRvXCI+XG4gICAgICAgIHsoc2VsZWN0ZWRTdWJEaXNjdXNzaW9uID8gc2VsZWN0ZWRTdWJEaXNjdXNzaW9uLm1lc3NhZ2VzIDogbWVzc2FnZXMpLm1hcCgobWVzc2FnZSkgPT4gKFxuICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICBrZXk9e21lc3NhZ2UuaWR9XG4gICAgICAgICAgICBjbGFzc05hbWU9e2BmbGV4ICR7XG4gICAgICAgICAgICAgIG1lc3NhZ2UuYXV0aG9yID09PSB1c2VyPy5mdWxsX25hbWUgPyAnanVzdGlmeS1lbmQnIDogJ2p1c3RpZnktc3RhcnQnXG4gICAgICAgICAgICB9YH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17YG1heC13LXhzIHNtOm1heC13LW1kIG1kOm1heC13LWxnIHJvdW5kZWQtbGcgcC0zICR7XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5hdXRob3IgPT09IHVzZXI/LmZ1bGxfbmFtZVxuICAgICAgICAgICAgICAgICAgPyAnYmctYmx1ZS01MDAgdGV4dC13aGl0ZSByb3VuZGVkLWJyLW5vbmUnXG4gICAgICAgICAgICAgICAgICA6ICdiZy1ncmF5LTEwMCB0ZXh0LWdyYXktOTAwIHJvdW5kZWQtYmwtbm9uZSdcbiAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHttZXNzYWdlLmF1dGhvciAhPT0gdXNlcj8uZnVsbF9uYW1lICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTUwMCBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICB7bWVzc2FnZS5hdXRob3J9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbVwiPnttZXNzYWdlLmNvbnRlbnR9PC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgdGV4dC14cyBtdC0xICR7XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5hdXRob3IgPT09IHVzZXI/LmZ1bGxfbmFtZSA/ICd0ZXh0LWJsdWUtMTAwJyA6ICd0ZXh0LWdyYXktNTAwJ1xuICAgICAgICAgICAgICB9YH0+XG4gICAgICAgICAgICAgICAge21lc3NhZ2UudGltZXN0YW1wfVxuICAgICAgICAgICAgICAgIHttZXNzYWdlLmlzUGVuZGluZyAmJiAnIOKAoiBTZW5kaW5nLi4uJ31cbiAgICAgICAgICAgICAgICB7bWVzc2FnZS5mYWlsZWQgJiYgJyDigKIgRmFpbGVkIHRvIHNlbmQnfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApKX1cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8Zm9ybSBvblN1Ym1pdD17aGFuZGxlU2VuZE1lc3NhZ2V9IGNsYXNzTmFtZT1cInAtNCBib3JkZXItdFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggc3BhY2UteC0yXCI+XG4gICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICB2YWx1ZT17bmV3TWVzc2FnZX1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0TmV3TWVzc2FnZShlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlR5cGUgeW91ciBtZXNzYWdlLi4uXCJcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXgtMSByb3VuZGVkLWZ1bGwgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCBweC00IHB5LTIgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLWluZGlnby01MDBcIlxuICAgICAgICAgIC8+XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgdHlwZT1cInN1Ym1pdFwiXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1pbmRpZ28tNjAwIHRleHQtd2hpdGUgcHgtNCBweS0yIHJvdW5kZWQtZnVsbCBob3ZlcjpiZy1pbmRpZ28tNzAwIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1pbmRpZ28tNTAwIGZvY3VzOnJpbmctb2Zmc2V0LTJcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIFNlbmRcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Zvcm0+XG5cbiAgICAgIDxEaWFsb2cgb3Blbj17aXNOZXdTdWJEaXNjdXNzaW9uT3Blbn0gb25PcGVuQ2hhbmdlPXtzZXRJc05ld1N1YkRpc2N1c3Npb25PcGVufT5cbiAgICAgICAgPERpYWxvZ0hlYWRlcj5cbiAgICAgICAgICA8RGlhbG9nVGl0bGU+Q3JlYXRlIE5ldyBTdWItZGlzY3Vzc2lvbjwvRGlhbG9nVGl0bGU+XG4gICAgICAgIDwvRGlhbG9nSGVhZGVyPlxuICAgICAgICA8RGlhbG9nQ29udGVudD5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktNCBweS00XCI+XG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIG1iLTFcIj5cbiAgICAgICAgICAgICAgICBTdWItZGlzY3Vzc2lvbiBUaXRsZVxuICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICB2YWx1ZT17bmV3U3ViRGlzY3Vzc2lvblRpdGxlfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0TmV3U3ViRGlzY3Vzc2lvblRpdGxlKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkVudGVyIHN1Yi1kaXNjdXNzaW9uIHRpdGxlLi4uXCJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGxcIlxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvRGlhbG9nQ29udGVudD5cbiAgICAgICAgPERpYWxvZ0Zvb3Rlcj5cbiAgICAgICAgICA8QnV0dG9uIFxuICAgICAgICAgICAgdmFyaWFudD1cInNlY29uZGFyeVwiIFxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0SXNOZXdTdWJEaXNjdXNzaW9uT3BlbihmYWxzZSl9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgQ2FuY2VsXG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgb25DbGljaz17aGFuZGxlQ3JlYXRlU3ViRGlzY3Vzc2lvbn1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImJnLWJsdWUtNjAwIGhvdmVyOmJnLWJsdWUtNzAwIHRleHQtd2hpdGVcIlxuICAgICAgICAgICAgZGlzYWJsZWQ9eyFuZXdTdWJEaXNjdXNzaW9uVGl0bGUudHJpbSgpfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIENyZWF0ZSBTdWItZGlzY3Vzc2lvblxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICA8L0RpYWxvZ0Zvb3Rlcj5cbiAgICAgIDwvRGlhbG9nPlxuICAgIDwvZGl2PlxuICApO1xufSAiXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJCdXR0b24iLCJJbnB1dCIsIkRpYWxvZyIsIkRpYWxvZ0hlYWRlciIsIkRpYWxvZ1RpdGxlIiwiRGlhbG9nQ29udGVudCIsIkRpYWxvZ0Zvb3RlciIsInVzZUF1dGgiLCJEaXNjdXNzaW9uTWVzc2FnZXMiLCJkaXNjdXNzaW9uSWQiLCJkaXNjdXNzaW9uVGl0bGUiLCJvbkJhY2siLCJjb25zb2xlIiwibG9nIiwidXNlciIsIm1lc3NhZ2VzIiwic2V0TWVzc2FnZXMiLCJzdWJEaXNjdXNzaW9ucyIsInNldFN1YkRpc2N1c3Npb25zIiwiaXNMb2FkaW5nIiwic2V0SXNMb2FkaW5nIiwiZm9ybWF0RGF0ZSIsImRhdGUiLCJub3ciLCJEYXRlIiwiZGlmZkluU2Vjb25kcyIsIk1hdGgiLCJmbG9vciIsImdldFRpbWUiLCJtaW51dGVzIiwiaG91cnMiLCJkYXlzIiwicGVuZGluZ01lc3NhZ2VzIiwic2V0UGVuZGluZ01lc3NhZ2VzIiwicG9sbGluZ0ludGVydmFsUmVmIiwiaXNNb3VudGVkIiwiZmV0Y2hEYXRhIiwic2hvd0xvYWRpbmciLCJsZW5ndGgiLCJtZXNzYWdlc1Jlc3BvbnNlIiwiZmV0Y2giLCJzdGF0dXMiLCJzdWJEaXNjdXNzaW9uc1Jlc3BvbnNlIiwib2siLCJlcnJvciIsInN0YXR1c1RleHQiLCJFcnJvciIsIm1lc3NhZ2VzRGF0YSIsImpzb24iLCJzdWJEaXNjdXNzaW9uc0RhdGEiLCJtYWluRGlzY3Vzc2lvbk1lc3NhZ2VzIiwic3ViRGlzY3Vzc2lvbk1lc3NhZ2VzTWFwIiwiTWFwIiwiZm9yRWFjaCIsIm0iLCJmb3JtYXR0ZWRNZXNzYWdlIiwiaWQiLCJhdXRob3IiLCJjb250ZW50IiwidGltZXN0YW1wIiwiY3JlYXRlZF9hdCIsInNlcnZlcklkIiwic3ViZGlzY3Vzc2lvbl9pZCIsInN1YklkIiwiaGFzIiwic2V0IiwiZ2V0IiwicHVzaCIsImZvcm1hdHRlZFN1YkRpc2N1c3Npb25zIiwibWFwIiwicyIsInN1Yk1lc3NhZ2VzIiwibGFzdE1lc3NhZ2VUaW1lIiwicmVkdWNlIiwibGF0ZXN0IiwibXNnIiwibXNnVGltZSIsInRpdGxlIiwiY3JlYXRlZEF0IiwibGFzdE1lc3NhZ2VBdCIsInByb2dyZXNzIiwiZm9ybWF0dGVkTWVzc2FnZXMiLCJzZWxlY3RlZFN1YkRpc2N1c3Npb24iLCJ1cGRhdGVkU3ViRGlzY3Vzc2lvbiIsImZpbmQiLCJzZCIsInNldFNlbGVjdGVkU3ViRGlzY3Vzc2lvbiIsImNvbmZpcm1lZE1lc3NhZ2VJZHMiLCJzdGlsbFBlbmRpbmdNZXNzYWdlcyIsImZpbHRlciIsInBtIiwiaW5jbHVkZXMiLCJjb21iaW5lZE1lc3NhZ2VzIiwiY3VycmVudCIsImNsZWFySW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsImlzTmV3U3ViRGlzY3Vzc2lvbk9wZW4iLCJzZXRJc05ld1N1YkRpc2N1c3Npb25PcGVuIiwibmV3U3ViRGlzY3Vzc2lvblRpdGxlIiwic2V0TmV3U3ViRGlzY3Vzc2lvblRpdGxlIiwibmV3TWVzc2FnZSIsInNldE5ld01lc3NhZ2UiLCJoYW5kbGVOZXdTdWJEaXNjdXNzaW9uIiwiaGFuZGxlQ3JlYXRlU3ViRGlzY3Vzc2lvbiIsInRyaW0iLCJyZXNwb25zZSIsIm1ldGhvZCIsImhlYWRlcnMiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJuZXdTdWJEaXNjdXNzaW9uIiwicHJldiIsImhhbmRsZVNlbmRNZXNzYWdlIiwiZSIsInByZXZlbnREZWZhdWx0IiwidGVtcElkIiwicGVuZGluZ01lc3NhZ2UiLCJmdWxsX25hbWUiLCJpc1BlbmRpbmciLCJzdWIiLCJkaXNjdXNzaW9uX2lkIiwidXNlcm5hbWUiLCJuZXdNZXNzYWdlRGF0YSIsInVwZGF0ZWRNZXNzYWdlcyIsInRvU3RyaW5nIiwiZmFpbGVkIiwiZGl2IiwiY2xhc3NOYW1lIiwic3BhbiIsIm9uQ2xpY2siLCJ2YXJpYW50IiwiaDIiLCJ1bmRlZmluZWQiLCJwIiwiaDMiLCJoNCIsIm1lc3NhZ2UiLCJmb3JtIiwib25TdWJtaXQiLCJpbnB1dCIsInR5cGUiLCJ2YWx1ZSIsIm9uQ2hhbmdlIiwidGFyZ2V0IiwicGxhY2Vob2xkZXIiLCJidXR0b24iLCJvcGVuIiwib25PcGVuQ2hhbmdlIiwibGFiZWwiLCJkaXNhYmxlZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/components/DiscussionMessages.tsx\n"));

/***/ })

});