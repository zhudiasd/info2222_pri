"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/messages/route";
exports.ids = ["app/api/messages/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("pg");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmessages%2Froute&page=%2Fapi%2Fmessages%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmessages%2Froute.ts&appDir=%2FUsers%2Fabhishekyadav%2FDesktop%2FINFO2222%2FINFO2222_PROJECT_PHASE1%2FThreadflow_Main%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fabhishekyadav%2FDesktop%2FINFO2222%2FINFO2222_PROJECT_PHASE1%2FThreadflow_Main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmessages%2Froute&page=%2Fapi%2Fmessages%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmessages%2Froute.ts&appDir=%2FUsers%2Fabhishekyadav%2FDesktop%2FINFO2222%2FINFO2222_PROJECT_PHASE1%2FThreadflow_Main%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fabhishekyadav%2FDesktop%2FINFO2222%2FINFO2222_PROJECT_PHASE1%2FThreadflow_Main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_abhishekyadav_Desktop_INFO2222_INFO2222_PROJECT_PHASE1_Threadflow_Main_src_app_api_messages_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/messages/route.ts */ \"(rsc)/./src/app/api/messages/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/messages/route\",\n        pathname: \"/api/messages\",\n        filename: \"route\",\n        bundlePath: \"app/api/messages/route\"\n    },\n    resolvedPagePath: \"/Users/abhishekyadav/Desktop/INFO2222/INFO2222_PROJECT_PHASE1/Threadflow_Main/src/app/api/messages/route.ts\",\n    nextConfigOutput,\n    userland: _Users_abhishekyadav_Desktop_INFO2222_INFO2222_PROJECT_PHASE1_Threadflow_Main_src_app_api_messages_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/messages/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZtZXNzYWdlcyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGbWVzc2FnZXMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZtZXNzYWdlcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmFiaGlzaGVreWFkYXYlMkZEZXNrdG9wJTJGSU5GTzIyMjIlMkZJTkZPMjIyMl9QUk9KRUNUX1BIQVNFMSUyRlRocmVhZGZsb3dfTWFpbiUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZhYmhpc2hla3lhZGF2JTJGRGVza3RvcCUyRklORk8yMjIyJTJGSU5GTzIyMjJfUFJPSkVDVF9QSEFTRTElMkZUaHJlYWRmbG93X01haW4maXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDMkQ7QUFDeEk7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUM2Sjs7QUFFN0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90aHJlYWRmbG93Lz84MmY4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9hYmhpc2hla3lhZGF2L0Rlc2t0b3AvSU5GTzIyMjIvSU5GTzIyMjJfUFJPSkVDVF9QSEFTRTEvVGhyZWFkZmxvd19NYWluL3NyYy9hcHAvYXBpL21lc3NhZ2VzL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9tZXNzYWdlcy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL21lc3NhZ2VzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9tZXNzYWdlcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9hYmhpc2hla3lhZGF2L0Rlc2t0b3AvSU5GTzIyMjIvSU5GTzIyMjJfUFJPSkVDVF9QSEFTRTEvVGhyZWFkZmxvd19NYWluL3NyYy9hcHAvYXBpL21lc3NhZ2VzL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL21lc3NhZ2VzL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmessages%2Froute&page=%2Fapi%2Fmessages%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmessages%2Froute.ts&appDir=%2FUsers%2Fabhishekyadav%2FDesktop%2FINFO2222%2FINFO2222_PROJECT_PHASE1%2FThreadflow_Main%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fabhishekyadav%2FDesktop%2FINFO2222%2FINFO2222_PROJECT_PHASE1%2FThreadflow_Main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/messages/route.ts":
/*!***************************************!*\
  !*** ./src/app/api/messages/route.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _db_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/db/db */ \"(rsc)/./src/db/db.ts\");\n\n\n// GET: Fetch all messages\nasync function GET(req) {\n    try {\n        // Optional: Get discussion ID from query params to filter messages\n        const url = new URL(req.url);\n        const discussionId = url.searchParams.get(\"discussionId\");\n        let queryText = \"SELECT * FROM messages\";\n        let params = [];\n        if (discussionId) {\n            queryText += \" WHERE discussion_id = $1\";\n            params.push(discussionId);\n        }\n        queryText += \" ORDER BY created_at ASC\";\n        const result = await (0,_db_db__WEBPACK_IMPORTED_MODULE_1__.query)(queryText, params);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(result.rows, {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"Error fetching messages:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to fetch messages\"\n        }, {\n            status: 500\n        });\n    }\n}\n// POST: Create a new message\nasync function POST(req) {\n    try {\n        // Get the authorization header\n        const authHeader = req.headers.get(\"authorization\");\n        // For development purposes, we'll accept requests without auth\n        // or with a default token\n        if (authHeader) {\n            if (!authHeader.startsWith(\"Bearer \")) {\n                console.warn(\"Invalid authorization header format\");\n            } else {\n                const token = authHeader.split(\" \")[1];\n                console.log(\"Received token:\", token ? \"valid token\" : \"empty token\");\n            }\n        } else {\n            console.log(\"No authorization header provided, continuing anyway for development\");\n        }\n        // In a production app, you would verify the token properly\n        const { discussion_id, subdiscussion_id, content, username } = await req.json();\n        if (!discussion_id || !content) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Missing required fields\"\n            }, {\n                status: 400\n            });\n        }\n        // Use the username from the request or a default value\n        const author = username || \"Anonymous\";\n        const result = await (0,_db_db__WEBPACK_IMPORTED_MODULE_1__.query)(`INSERT INTO messages (discussion_id, subdiscussion_id, author, content, created_at) \n       VALUES ($1, $2, $3, $4, NOW()) \n       RETURNING *`, [\n            discussion_id,\n            subdiscussion_id || null,\n            author,\n            content\n        ]);\n        console.log(\"Message saved successfully:\", result.rows[0]);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(result.rows[0], {\n            status: 201\n        });\n    } catch (error) {\n        console.error(\"Error creating message:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to create message\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9tZXNzYWdlcy9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXdEO0FBQ3hCO0FBRWhDLDBCQUEwQjtBQUNuQixlQUFlRSxJQUFJQyxHQUFnQjtJQUN4QyxJQUFJO1FBQ0YsbUVBQW1FO1FBQ25FLE1BQU1DLE1BQU0sSUFBSUMsSUFBSUYsSUFBSUMsR0FBRztRQUMzQixNQUFNRSxlQUFlRixJQUFJRyxZQUFZLENBQUNDLEdBQUcsQ0FBQztRQUUxQyxJQUFJQyxZQUFZO1FBQ2hCLElBQUlDLFNBQWdCLEVBQUU7UUFFdEIsSUFBSUosY0FBYztZQUNoQkcsYUFBYTtZQUNiQyxPQUFPQyxJQUFJLENBQUNMO1FBQ2Q7UUFFQUcsYUFBYTtRQUViLE1BQU1HLFNBQVMsTUFBTVgsNkNBQUtBLENBQUNRLFdBQVdDO1FBRXRDLE9BQU9WLGtGQUFZQSxDQUFDYSxJQUFJLENBQUNELE9BQU9FLElBQUksRUFBRTtZQUFFQyxRQUFRO1FBQUk7SUFDdEQsRUFBRSxPQUFPQyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyw0QkFBNEJBO1FBQzFDLE9BQU9oQixrRkFBWUEsQ0FBQ2EsSUFBSSxDQUFDO1lBQUVHLE9BQU87UUFBMkIsR0FBRztZQUFFRCxRQUFRO1FBQUk7SUFDaEY7QUFDRjtBQUVBLDZCQUE2QjtBQUN0QixlQUFlRyxLQUFLZixHQUFnQjtJQUN6QyxJQUFJO1FBQ0YsK0JBQStCO1FBQy9CLE1BQU1nQixhQUFhaEIsSUFBSWlCLE9BQU8sQ0FBQ1osR0FBRyxDQUFDO1FBRW5DLCtEQUErRDtRQUMvRCwwQkFBMEI7UUFDMUIsSUFBSVcsWUFBWTtZQUNkLElBQUksQ0FBQ0EsV0FBV0UsVUFBVSxDQUFDLFlBQVk7Z0JBQ3JDSixRQUFRSyxJQUFJLENBQUM7WUFDZixPQUFPO2dCQUNMLE1BQU1DLFFBQVFKLFdBQVdLLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRTtnQkFDdENQLFFBQVFRLEdBQUcsQ0FBQyxtQkFBbUJGLFFBQVEsZ0JBQWdCO1lBQ3pEO1FBQ0YsT0FBTztZQUNMTixRQUFRUSxHQUFHLENBQUM7UUFDZDtRQUVBLDJEQUEyRDtRQUUzRCxNQUFNLEVBQUVDLGFBQWEsRUFBRUMsZ0JBQWdCLEVBQUVDLE9BQU8sRUFBRUMsUUFBUSxFQUFFLEdBQUcsTUFBTTFCLElBQUlVLElBQUk7UUFFN0UsSUFBSSxDQUFDYSxpQkFBaUIsQ0FBQ0UsU0FBUztZQUM5QixPQUFPNUIsa0ZBQVlBLENBQUNhLElBQUksQ0FBQztnQkFBRUcsT0FBTztZQUEwQixHQUFHO2dCQUFFRCxRQUFRO1lBQUk7UUFDL0U7UUFFQSx1REFBdUQ7UUFDdkQsTUFBTWUsU0FBU0QsWUFBWTtRQUUzQixNQUFNakIsU0FBUyxNQUFNWCw2Q0FBS0EsQ0FDeEIsQ0FBQzs7a0JBRVcsQ0FBQyxFQUNiO1lBQUN5QjtZQUFlQyxvQkFBb0I7WUFBTUc7WUFBUUY7U0FBUTtRQUc1RFgsUUFBUVEsR0FBRyxDQUFDLCtCQUErQmIsT0FBT0UsSUFBSSxDQUFDLEVBQUU7UUFDekQsT0FBT2Qsa0ZBQVlBLENBQUNhLElBQUksQ0FBQ0QsT0FBT0UsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUFFQyxRQUFRO1FBQUk7SUFDekQsRUFBRSxPQUFPQyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQywyQkFBMkJBO1FBQ3pDLE9BQU9oQixrRkFBWUEsQ0FBQ2EsSUFBSSxDQUFDO1lBQUVHLE9BQU87UUFBMkIsR0FBRztZQUFFRCxRQUFRO1FBQUk7SUFDaEY7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3RocmVhZGZsb3cvLi9zcmMvYXBwL2FwaS9tZXNzYWdlcy9yb3V0ZS50cz9hMmQ5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBxdWVyeSB9IGZyb20gJ0AvZGIvZGInO1xuXG4vLyBHRVQ6IEZldGNoIGFsbCBtZXNzYWdlc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgLy8gT3B0aW9uYWw6IEdldCBkaXNjdXNzaW9uIElEIGZyb20gcXVlcnkgcGFyYW1zIHRvIGZpbHRlciBtZXNzYWdlc1xuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwocmVxLnVybCk7XG4gICAgY29uc3QgZGlzY3Vzc2lvbklkID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoJ2Rpc2N1c3Npb25JZCcpO1xuICAgIFxuICAgIGxldCBxdWVyeVRleHQgPSAnU0VMRUNUICogRlJPTSBtZXNzYWdlcyc7XG4gICAgbGV0IHBhcmFtczogYW55W10gPSBbXTtcbiAgICBcbiAgICBpZiAoZGlzY3Vzc2lvbklkKSB7XG4gICAgICBxdWVyeVRleHQgKz0gJyBXSEVSRSBkaXNjdXNzaW9uX2lkID0gJDEnO1xuICAgICAgcGFyYW1zLnB1c2goZGlzY3Vzc2lvbklkKTtcbiAgICB9XG4gICAgXG4gICAgcXVlcnlUZXh0ICs9ICcgT1JERVIgQlkgY3JlYXRlZF9hdCBBU0MnO1xuICAgIFxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5KHF1ZXJ5VGV4dCwgcGFyYW1zKTtcbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24ocmVzdWx0LnJvd3MsIHsgc3RhdHVzOiAyMDAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgbWVzc2FnZXM6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIG1lc3NhZ2VzJyB9LCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG59XG5cbi8vIFBPU1Q6IENyZWF0ZSBhIG5ldyBtZXNzYWdlXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgLy8gR2V0IHRoZSBhdXRob3JpemF0aW9uIGhlYWRlclxuICAgIGNvbnN0IGF1dGhIZWFkZXIgPSByZXEuaGVhZGVycy5nZXQoJ2F1dGhvcml6YXRpb24nKTtcbiAgICBcbiAgICAvLyBGb3IgZGV2ZWxvcG1lbnQgcHVycG9zZXMsIHdlJ2xsIGFjY2VwdCByZXF1ZXN0cyB3aXRob3V0IGF1dGhcbiAgICAvLyBvciB3aXRoIGEgZGVmYXVsdCB0b2tlblxuICAgIGlmIChhdXRoSGVhZGVyKSB7XG4gICAgICBpZiAoIWF1dGhIZWFkZXIuc3RhcnRzV2l0aCgnQmVhcmVyICcpKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignSW52YWxpZCBhdXRob3JpemF0aW9uIGhlYWRlciBmb3JtYXQnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHRva2VuID0gYXV0aEhlYWRlci5zcGxpdCgnICcpWzFdO1xuICAgICAgICBjb25zb2xlLmxvZygnUmVjZWl2ZWQgdG9rZW46JywgdG9rZW4gPyAndmFsaWQgdG9rZW4nIDogJ2VtcHR5IHRva2VuJyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKCdObyBhdXRob3JpemF0aW9uIGhlYWRlciBwcm92aWRlZCwgY29udGludWluZyBhbnl3YXkgZm9yIGRldmVsb3BtZW50Jyk7XG4gICAgfVxuICAgIFxuICAgIC8vIEluIGEgcHJvZHVjdGlvbiBhcHAsIHlvdSB3b3VsZCB2ZXJpZnkgdGhlIHRva2VuIHByb3Blcmx5XG4gICAgXG4gICAgY29uc3QgeyBkaXNjdXNzaW9uX2lkLCBzdWJkaXNjdXNzaW9uX2lkLCBjb250ZW50LCB1c2VybmFtZSB9ID0gYXdhaXQgcmVxLmpzb24oKTtcbiAgICBcbiAgICBpZiAoIWRpc2N1c3Npb25faWQgfHwgIWNvbnRlbnQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnTWlzc2luZyByZXF1aXJlZCBmaWVsZHMnIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIFVzZSB0aGUgdXNlcm5hbWUgZnJvbSB0aGUgcmVxdWVzdCBvciBhIGRlZmF1bHQgdmFsdWVcbiAgICBjb25zdCBhdXRob3IgPSB1c2VybmFtZSB8fCAnQW5vbnltb3VzJztcbiAgICBcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeShcbiAgICAgIGBJTlNFUlQgSU5UTyBtZXNzYWdlcyAoZGlzY3Vzc2lvbl9pZCwgc3ViZGlzY3Vzc2lvbl9pZCwgYXV0aG9yLCBjb250ZW50LCBjcmVhdGVkX2F0KSBcbiAgICAgICBWQUxVRVMgKCQxLCAkMiwgJDMsICQ0LCBOT1coKSkgXG4gICAgICAgUkVUVVJOSU5HICpgLFxuICAgICAgW2Rpc2N1c3Npb25faWQsIHN1YmRpc2N1c3Npb25faWQgfHwgbnVsbCwgYXV0aG9yLCBjb250ZW50XVxuICAgICk7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ01lc3NhZ2Ugc2F2ZWQgc3VjY2Vzc2Z1bGx5OicsIHJlc3VsdC5yb3dzWzBdKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24ocmVzdWx0LnJvd3NbMF0sIHsgc3RhdHVzOiAyMDEgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgbWVzc2FnZTonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gY3JlYXRlIG1lc3NhZ2UnIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJxdWVyeSIsIkdFVCIsInJlcSIsInVybCIsIlVSTCIsImRpc2N1c3Npb25JZCIsInNlYXJjaFBhcmFtcyIsImdldCIsInF1ZXJ5VGV4dCIsInBhcmFtcyIsInB1c2giLCJyZXN1bHQiLCJqc29uIiwicm93cyIsInN0YXR1cyIsImVycm9yIiwiY29uc29sZSIsIlBPU1QiLCJhdXRoSGVhZGVyIiwiaGVhZGVycyIsInN0YXJ0c1dpdGgiLCJ3YXJuIiwidG9rZW4iLCJzcGxpdCIsImxvZyIsImRpc2N1c3Npb25faWQiLCJzdWJkaXNjdXNzaW9uX2lkIiwiY29udGVudCIsInVzZXJuYW1lIiwiYXV0aG9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/messages/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/db/db.ts":
/*!**********************!*\
  !*** ./src/db/db.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   query: () => (/* binding */ query)\n/* harmony export */ });\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pg */ \"pg\");\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(pg__WEBPACK_IMPORTED_MODULE_0__);\n\nconst pool = new pg__WEBPACK_IMPORTED_MODULE_0__.Pool({\n    user: process.env.DB_USER || \"postgres\",\n    host: process.env.DB_HOST || \"localhost\",\n    database: process.env.DB_NAME || \"threadflow\",\n    password: process.env.DB_PASSWORD || \"postgres\",\n    port: parseInt(process.env.DB_PORT || \"5432\")\n});\nconst query = (text, params)=>pool.query(text, params);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (pool);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvZGIvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUEwQjtBQUUxQixNQUFNQyxPQUFPLElBQUlELG9DQUFJQSxDQUFDO0lBQ3BCRSxNQUFNQyxRQUFRQyxHQUFHLENBQUNDLE9BQU8sSUFBSTtJQUM3QkMsTUFBTUgsUUFBUUMsR0FBRyxDQUFDRyxPQUFPLElBQUk7SUFDN0JDLFVBQVVMLFFBQVFDLEdBQUcsQ0FBQ0ssT0FBTyxJQUFJO0lBQ2pDQyxVQUFVUCxRQUFRQyxHQUFHLENBQUNPLFdBQVcsSUFBSTtJQUNyQ0MsTUFBTUMsU0FBU1YsUUFBUUMsR0FBRyxDQUFDVSxPQUFPLElBQUk7QUFDeEM7QUFFTyxNQUFNQyxRQUFRLENBQUNDLE1BQWNDLFNBQW1CaEIsS0FBS2MsS0FBSyxDQUFDQyxNQUFNQyxRQUFRO0FBRWhGLGlFQUFlaEIsSUFBSUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3RocmVhZGZsb3cvLi9zcmMvZGIvZGIudHM/OTJjYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQb29sIH0gZnJvbSAncGcnO1xuXG5jb25zdCBwb29sID0gbmV3IFBvb2woe1xuICB1c2VyOiBwcm9jZXNzLmVudi5EQl9VU0VSIHx8ICdwb3N0Z3JlcycsXG4gIGhvc3Q6IHByb2Nlc3MuZW52LkRCX0hPU1QgfHwgJ2xvY2FsaG9zdCcsXG4gIGRhdGFiYXNlOiBwcm9jZXNzLmVudi5EQl9OQU1FIHx8ICd0aHJlYWRmbG93JyxcbiAgcGFzc3dvcmQ6IHByb2Nlc3MuZW52LkRCX1BBU1NXT1JEIHx8ICdwb3N0Z3JlcycsXG4gIHBvcnQ6IHBhcnNlSW50KHByb2Nlc3MuZW52LkRCX1BPUlQgfHwgJzU0MzInKSxcbn0pO1xuXG5leHBvcnQgY29uc3QgcXVlcnkgPSAodGV4dDogc3RyaW5nLCBwYXJhbXM/OiBhbnlbXSkgPT4gcG9vbC5xdWVyeSh0ZXh0LCBwYXJhbXMpO1xuXG5leHBvcnQgZGVmYXVsdCBwb29sOyAiXSwibmFtZXMiOlsiUG9vbCIsInBvb2wiLCJ1c2VyIiwicHJvY2VzcyIsImVudiIsIkRCX1VTRVIiLCJob3N0IiwiREJfSE9TVCIsImRhdGFiYXNlIiwiREJfTkFNRSIsInBhc3N3b3JkIiwiREJfUEFTU1dPUkQiLCJwb3J0IiwicGFyc2VJbnQiLCJEQl9QT1JUIiwicXVlcnkiLCJ0ZXh0IiwicGFyYW1zIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/db/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmessages%2Froute&page=%2Fapi%2Fmessages%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmessages%2Froute.ts&appDir=%2FUsers%2Fabhishekyadav%2FDesktop%2FINFO2222%2FINFO2222_PROJECT_PHASE1%2FThreadflow_Main%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fabhishekyadav%2FDesktop%2FINFO2222%2FINFO2222_PROJECT_PHASE1%2FThreadflow_Main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();